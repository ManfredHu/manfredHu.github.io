!function(){function n(){function n(){for(c=0;e>c;c++)f=new v,f.reset(),m.push(f)}function i(){if(r.clearRect(0,0,l,h),d){for(c=0;a>c;c++)f=m[c],f.y+=f.vy,f.x+=f.vx,r.globalAlpha=f.o,r.beginPath(),r.arc(f.x,f.y,f.r,0,2*Math.PI,!1),r.closePath(),r.fill(),f.y>h&&f.reset();requestAnimFrame(i)}}function t(){l=s.clientWidth,h=s.clientHeight,o.width=l,o.height=h,r.fillStyle="#fff";var n=d;d=l>480,!n&&d&&requestAnimFrame(i)}var a=50,e=150,s=document.querySelector("#header"),o=document.createElement("canvas"),r=o.getContext("2d"),l=s.clientWidth,h=s.clientHeight,c=0,d=!1,m=[],f=null;o.style.cssText="position:absolute;top:0;transform:translateZ(0);";var v=function(){this.x=0,this.y=0,this.vy=0,this.vx=0,this.r=0,this.reset()};v.prototype.reset=function(){this.x=Math.random()*l,this.y=Math.random()*-h,this.vy=1+3*Math.random(),this.vx=.5-Math.random(),this.r=1+2*Math.random(),this.o=.5+.5*Math.random()},n(),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}(),t(),window.addEventListener("resize",t,!1),s.appendChild(o)}n()}(),function(n){function i(){var i=n(".nav-container-inner").width()-10,t=n("#main-nav").width(),a=n("#sub-nav").width();if(t+a>i){0==n(".main-nav-more").length&&(n(['<li class="main-nav-list-item top-level-menu main-nav-more">','<a class="main-nav-list-link" href="javascript:;">More</a>','<ul class="main-nav-list-child">',"</ul></li>"].join("")).appendTo(n("#main-nav")),n(".main-nav-more").hover(function(){n(window).width()<480||n(this).children(".main-nav-list-child").slideDown("fast")},function(){n(window).width()<480||n(this).children(".main-nav-list-child").slideUp("fast")}));for(var e=n("#main-nav").children().length,s=e-2;s>=0;s--){var o=n("#main-nav").children().eq(s);if(!(t+a>i))return;o.prependTo(n(".main-nav-more > ul")),t=n("#main-nav").width()}}n(".main-nav-more").length>0&&(n(".main-nav-more > ul").children().appendTo(n("#main-nav")),n(".main-nav-more").remove())}function t(){function i(){var n=e.scrollTop();n>a?t.addClass("fixSidebar"):t.removeClass("fixSidebar")}var t=n(".sidebar-top"),a=t.offset().top,e=(n("#sidebar"),n(window));return i}n("#back-to-top").on("click",function(){n("body, html").animate({scrollTop:0},600)}),n("#main-nav-toggle").on("click",function(){n(".nav-container-inner").slideToggle()}),n(".article-entry").each(function(i){n(this).find("img").each(function(){if(!n(this).parent().hasClass("fancybox")){var i=this.alt;i&&n(this).after('<span class="caption">'+i+"</span>"),n(this).wrap('<a href="'+this.src+'" title="'+i+'" class="fancybox"></a>')}}),n(this).find(".fancybox").each(function(){n(this).attr("rel","article"+i)})}),n.fancybox&&n(".fancybox").fancybox(),n("#sidebar .sidebar-toggle").click(function(){n("#sidebar").hasClass("expend")?n("#sidebar").removeClass("expend"):n("#sidebar").addClass("expend")}),n(".main-nav-list > li").unwrap(),n("#main-nav > li > .main-nav-list-link").each(function(){n(".page-title-link").length>0&&(n(this).html().toUpperCase()==n(".page-title-link").html().toUpperCase()?n(this).addClass("current"):n(this).attr("href")==n(".page-title-link").attr("data-url")&&n(this).addClass("current"))}),i(),n(window).resize(function(){i()}),n(".main-nav-list-item").hover(function(){n(window).width()<480||n(this).children(".main-nav-list-child").slideDown("fast")},function(){n(window).width()<480||n(this).children(".main-nav-list-child").slideUp("fast")}),n(".main-nav-list-item").each(function(){n(this).find(".main-nav-list-child").length>0&&n(this).addClass("top-level-menu")}),n(window).scroll(t())}(jQuery);