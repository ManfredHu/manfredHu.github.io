function getStyle(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle(e,null)[t]}function scrollHandler(e){var t=e||window.event,o=(t.target||t.srcElement,document.documentElement.scrollTop||document.body.scrollTop);o>h-navbar.offsetHeight?navbar.classList.add("fixed"):navbar.classList.remove("fixed")}function getStyle(e,t){return null==e?"":e.currentStyle?e.currentStyle[t]:window.getComputedStyle(e,null)[t]}function setBackground(){var e=0;if(night_model=!night_model,0==night_model){for(header.style.background=header_bg_d,footer.style.background=footer_bg_d,header.style.borderColor=header_border_d,wrap.style.background=body_bg_d,articleInner.setAttribute("class","article-inner"),e=0;e<h1title.length;e++)h1title[e].style.color=article_title_d;for(e=0;e<h2title.length;e++)h2title[e].style.color=article_title_d;for(e=0;e<h3title.length;e++)h3title[e].style.color=article_title_d;for(e=0;e<figure.length;e++)figure[e].style.background=code_bg_d,figure[e].style.borderColor=code_border_d;for(e=0;e<code.length;e++)code[e].style.color=code_color_d;for(e=0;e<pre.length;e++)pre[e].style.background=code_bg_d,pre[e].style.color="#525252";for(e=0;e<all_p.length;e++)all_p[e].style.color=article_p_d}else{for(header.style.background=header_bg_n,footer.style.background=footer_bg_n,header.style.borderColor=header_border_n,wrap.style.background=body_bg_n,articleInner.setAttribute("class","article-inner-night"),e=0;e<h1title.length;e++)h1title[e].style.color=article_title_n;for(e=0;e<h2title.length;e++)h2title[e].style.color=article_title_n;for(e=0;e<h3title.length;e++)h3title[e].style.color=article_title_n;for(e=0;e<figure.length;e++)figure[e].style.background=code_bg_n,figure[e].style.borderColor=code_border_n;for(e=0;e<code.length;e++)code[e].style.color=code_color_n;for(e=0;e<pre.length;e++)pre[e].style.background=code_bg_n,pre[e].style.color=article_p_n;for(e=0;e<all_p.length;e++)all_p[e].style.color=article_p_n}}function setFontSize(){if(content_fontsize_big=!content_fontsize_big,1==content_fontsize_big)for(var e=0;e<all_p.length;e++)all_p[e].style.fontSize="1.2em";else for(var e=0;e<all_p.length;e++)all_p[e].style.fontSize="1em"}!function(e){function t(){if(!(e(".article-entry").length<=0)){for(var t=["h1","h2","h3","h4","h5","h6"],n=e(".article-entry").find(t.join(",")),a=0,r=n.length;r>a;a++)b.push({target:n[a],y:e(n[a]).offset().top-20});o()}}function o(){var t=e(document).scrollTop(),o=n(b,t);p=e(".toc").find("a");for(var a=0,r=p.length;r>a;a++)e(p[a]).attr("href").slice(1)==o.target.id?e(p[a]).addClass("color-text__active"):e(p[a]).removeClass("color-text__active")}function n(e,t){if(!(e.length<=0&&0==t||e.length<=0)){if(t<=e[0].y)return e[0];if(t>=e[e.length-1].y)return e[e.length-1];for(var o=0,n=e.length;n>o;o++)if(t>=e[o].y&&t<e[o+1].y)return e[o]}}function a(e,t,o){var n=null,a=new Date;return function(){var r=this,i=arguments,l=new Date;clearTimeout(n),l-a>=o?(e.apply(r,i),a=l):n=setTimeout(function(){e.apply(r,i)},t)}}var r=window.location.pathname;e("#navigater-list").length>0&&e("#navigater-list > a").each(function(){-1!=r.indexOf(e(this).attr("href"))&&e(this).addClass("main-nav-link__active curpoint-normal")}),e(".nav").length>0&&(e(".nav a").each(function(){var t=e(this).attr("href");-1!=r.indexOf(t)&&"/"!=t?e(this).addClass("main-nav-link__active curpoint-normal"):e(this).removeClass("main-nav-link__active")}),0==e(".main-nav-link__active").length&&e(".nav a").eq(1).addClass("main-nav-link__active curpoint-normal"));var i=e("#search-form-wrap"),l=!1,c=200,s=function(){l=!0},d=function(e){setTimeout(function(){l=!1,e&&e()},c)};e("#nav-search-btn").on("click",function(){l||(s(),i.addClass("on"),d(function(){e(".search-form-input").focus()}))}),e(".search-form-input").on("blur",function(){s(),i.removeClass("on"),d()}),e("body").on("click",function(){e(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var o=e(this),n=o.attr("data-url"),a=encodeURIComponent(n),r="article-share-box-"+o.attr("data-id"),i=o.offset();if(e("#"+r).length){var l=e("#"+r);if(l.hasClass("on"))return void l.removeClass("on")}else{var c=['<div id="'+r+'" class="article-share-box">','<input class="article-share-input" value="'+n+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+a+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+a+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+a+'" class="article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+a+'" class="article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join(""),l=e(c);e("body").append(l)}e(".article-share-box.on").hide(),l.css({top:i.top+25,left:i.left}).addClass("on")}).on("click",".article-share-box",function(e){e.stopPropagation()}).on("click",".article-share-box-input",function(){e(this).select()}).on("click",".article-share-box-link",function(e){e.preventDefault(),e.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}),e(".article-entry").each(function(t){e(this).find("img").each(function(){if(!e(this).parent().hasClass("fancybox")){var t=this.alt;t&&e(this).after('<span class="caption">'+t+"</span>"),e(this).wrap('<a href="'+this.src+'" title="'+t+'" class="fancybox"></a>')}}),e(this).find(".fancybox").each(function(){e(this).attr("rel","article"+t)})}),e.fancybox&&e(".fancybox").fancybox();var h=e("#container"),f=!1,g=200,u=function(){f=!0},_=function(){setTimeout(function(){f=!1},g)};e("#main-nav-toggle").on("click",function(){f||(u(),h.toggleClass("mobile-nav-on"),_())}),e("#wrap").on("click",function(){!f&&h.hasClass("mobile-nav-on")&&h.removeClass("mobile-nav-on")}),e("#toc").length>0&&e("#toc").height(e(window).height()),e(".fix-sidebar-nav").on("click",function(){e(".big-sidebar").hasClass("big-sidebar__show")?(e(".big-sidebar").removeClass("big-sidebar__show"),e(".fix-sidebar-nav").removeClass("fix-sidebar-nav__active")):(e(".big-sidebar").addClass("big-sidebar__show"),e(".fix-sidebar-nav").addClass("fix-sidebar-nav__active"),o())}),e(".toc-item").on("click",function(){}),e(".fix-sidebar-comment").on("click",function(){for(var t=["comment","comments","uyan_frame"],o=0;o<t.length&&!document.getElementById(t[o]);o++);var n=document.getElementById(t[o]);e("html, body").animate({scrollTop:e(n).offset().top},500,null)}),e(".fix-sidebar-share").on("click",function(){for(var t=["baidu-share"],o=0;o<t.length&&!document.getElementById(t[o]);o++);var n=document.getElementById(t[o]);e("html, body").animate({scrollTop:e(n).offset().top-e(window).height()/2+30},500,null)});var m=!1;e(".fix-sidebar-music").on("click",function(){if(!(m||(m=!0,e("#musicComponent").length<=0))){var t=document.getElementById("musicComponent");t.style.margin="0",t.style.padding="0",t.style.border="none",t.style.width="330px",t.style.height="450px",t.style.overflow="hidden",t.style.position="absolute",t.style.left="-330px",t.style.top="0",t.style.zIndex=10;var o=document.createElement("iframe");o.frameborder="no",o.border="0",o.marginwidth="0",o.marginheight="0",o.width=330,o.height=450,o.src="//music.163.com/outchain/player?type=0&id=700296152&auto=1&height=430",document.getElementById("musicComponent").appendChild(o),o.onload=function(){m=!1,e(".fix-sidebar-music").addClass("fix-sidebar-music__active"),e(".fix-sidebar-music").off("click").on("click",function(){e(".fix-sidebar-music").hasClass("fix-sidebar-music__active")?(e(".fix-sidebar-music").removeClass("fix-sidebar-music__active"),e("#musicComponent").hide()):(e(".fix-sidebar-music").addClass("fix-sidebar-music__active"),e("#musicComponent").show())})}}}),e(".fix-sidebar-search").on("click",function(){e(".search-form-submit").trigger("click")});var b=[],p=[];t();var y=e(".big-sidebar"),v=function(e){y.hasClass("big-sidebar__show")&&o()};e(document).scroll(a(v,100,500))}(jQuery);var navbar=document.getElementsByClassName("intro-navigate")[0],h=window.innerHeight;$(window).scroll(function(){$(window).scrollTop()>.5*$(window).height()?$(".fix-sidebar-totop").addClass("show"):$(".fix-sidebar-totop").removeClass("show")}),$(".fix-sidebar-totop").click(function(){return $("html, body").animate({scrollTop:0},500,function(){$(".fix-sidebar-totop").removeClass("show")}),!1}),$("#homelogo").click(function(){return $("html, body").animate({scrollTop:$(window).height()},500,null),!1});var night_model=!1,content_fontsize_big=!1,header=document.getElementById("allheader"),footer=document.getElementById("footer"),wrap=document.getElementById("wrap"),articleInner=document.getElementById("articleInner"),h1title=document.getElementsByTagName("h1"),h2title=document.getElementsByTagName("h2"),h3title=document.getElementsByTagName("h3"),figure=document.getElementsByTagName("figure"),code=document.getElementsByTagName("code"),pre=document.getElementsByTagName("pre"),all_p=document.getElementsByTagName("p"),header_bg_d=getStyle(header,"background"),header_border_d=getStyle(header,"border-color"),footer_bg_d=getStyle(footer,"background"),body_bg_d="#fff",article_title_d="#555555",article_p_d="#444444";code_bg_d="#f8f8f8",code_border_d="#eef1f8",code_color_d=getStyle(document.getElementsByTagName("code")[0],"color");var header_bg_n="#161718",header_border_n="#1f2021",footer_bg_n=header_bg_n,body_bg_n="#1d1e1f",article_title_n="#9da5ae",article_p_n="#83868a";code_bg_n="#2d2f31",code_border_n="#333333",code_color_n=article_p_n;