# å…¨ç½‘ç‹¬å®¶-ä¸‡å­—é•¿æ–‡å…¥é—¨å‰ç«¯å…¨çƒåŒ–

## ç‰ˆæœ¬ä¿®è®¢
- v1: 2024-01-09 åˆå§‹åŒ–ç‰ˆæœ¬
- v2: 2024-12-24 ä¿®è®¢ç‰ˆæœ¬ï¼Œæ–°å¢å›½å®¶åœ°åŒºç« èŠ‚

è®¸å¤šå›½å†…ä¼ä¸šæ­£ç§¯æå¼€æ‹“å›½é™…å¸‚åœºï¼Œå¦‚Seaçš„Shopeeã€é˜¿é‡Œçš„Lazadaã€å­—èŠ‚çš„TikTokã€æ‹¼å¤šå¤šæµ·å¤–ç‰ˆTemuï¼Œä»¥åŠæœè£…å¿«æ¶ˆé¢†åŸŸçš„Sheinç­‰ã€‚å½“å›½å†…å¸‚åœºå­˜é‡ä¸šåŠ¡è¾¾åˆ°å³°å€¼é¢„æœŸæ—¶ï¼Œæµ·å¤–ä¸šåŠ¡æ­£æˆä¸ºå„å…¬å¸æœªæ¥æ”¶å…¥å¢é•¿çš„ä¸»è¦å‘åŠ›ç‚¹ã€‚å› æ­¤ï¼Œå‰ç«¯å›½é™…åŒ–å·²æˆä¸ºè¶Šæ¥è¶Šé‡è¦çš„èŒä¸šå‘å±•æ–¹å‘ã€‚

å›½å†…ITä¼ä¸šæ”¶å…¥å¤©èŠ±æ¿ï¼š**10äº¿X2å…ƒX365å¤©=7300äº¿å…ƒ**ï¼Œä¹Ÿå°±æ˜¯10äº¿äººå£ï¼Œä¼ä¸šæ¯å¤©èµšå–ç”¨æˆ·2å…ƒï¼Œä¿æŒ365å¤©ï¼Œå°±æ˜¯å•ä¸šåŠ¡å¢é•¿çš„è¥æ”¶å¤©èŠ±æ¿ï¼ˆå¤§éƒ¨åˆ†ä¸šåŠ¡èµšä¸åˆ°2å…ƒï¼Œç”¨æˆ·é‡ä¹Ÿæ²¡åˆ°10äº¿ï¼‰ã€‚æ¯”å¦‚è§†é¢‘å¦‚æœ60å…ƒä¸€ä¸ªæœˆé‚£ä¼šå‘˜è¥æ”¶å¤©èŠ±æ¿å°±å¯ä»¥è¿™ä¹ˆé¢„ä¼°ã€‚ç”šè‡³æ¯”è¿™ä¸ªè¿˜ä½ï¼Œæ¯•ç«Ÿç”¨æˆ·ä¼šæµå¤±ï¼Œæ‹‰æ–°ä¹Ÿè¦æˆæœ¬ï¼Œè¿è¥æˆæœ¬æ˜¯åœ¨é€’å¢çš„ã€‚

å›½é™…åŒ–ä¸ä»…ä»…æ˜¯å¤šè¯­è¨€æ–‡æ¡ˆé€‚é…è¿™ä¹ˆç®€å•ï¼Œè€Œæ˜¯ä¸€å…¨å¥—çš„å·¥ç¨‹åŒ–è§£å†³æ–¹æ¡ˆã€‚ç¬”è€…è§‰å¾—æ›´é‡è¦çš„æ˜¯**ä»ä¸šäººå‘˜éœ€è¦å…·å¤‡å…¨çƒè§†é‡ï¼Œå¯¹å¤šå…ƒæ–‡åŒ–æœ‰åŒ…å®¹å¿ƒå’Œæ•¬ç•å¿ƒç†ï¼ŒåŒæ—¶çŸ¥è¯†é¢è¦æ±‚ä¹Ÿè¾ƒé«˜**ã€‚æ¯”å¦‚ï¼Œäº†è§£SEAã€USã€UKç­‰å¸¸è§åœ°åŒºçš„ç®€å†™ï¼Œå°Šé‡ä¼Šæ–¯å…°æ•™çš„æ–‹æœˆèŠ‚ç­‰ä¹ ä¿—ã€‚å¯¹äºæœåŠ¡å…¨çƒç”¨æˆ·çš„äº§å“æ¥è¯´ï¼Œå¯¹åº”äº§å“çš„è¦æ±‚æ›´åŠ å¤æ‚ï¼Œå¤šæ ·æ€§ä½“ç°åœ¨ä¸åŒçš„æ–‡åŒ–ä¹ ä¿—å·®å¼‚ä¸Šï¼Œå…¶å®å³ä¾¿åœ¨åºå¤§çš„ä¸­å›½å†…éƒ¨ä¹Ÿå­˜åœ¨å—åŒ—å·®å¼‚ã€‚äº†è§£çš„è¶Šå¤šè¶Šå‘ç°è¿™ä¸ªä¸–ç•Œçš„â€œå¤šæ ·æ€§â€ã€‚

# æ¦‚å¿µè¯´æ˜

## è‹¹æœé”®ç›˜æ€ä¹ˆå–å¤šå›½? 

è‹¹æœé”®ç›˜æœ‰å¾ˆå¤šå‹å·ä¸åŒå‹å·çš„å¸ƒå±€ä¸ä¸€æ ·
https://www.apple.com/shop/product/MK2A3J/A/magic-keyboard-japanese

![](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/apple-keyboard.png)

é‚£å¦‚ä½•æ¨¡ä»¿è‹¹æœé€ ä¸€æŠŠå¯ä»¥å–åˆ°ä¸–ç•Œå„åœ°çš„é”®ç›˜ï¼Ÿ

1. ç”µè·¯æ¿ç­‰ç¡¬ä»¶é…ä»¶ç»Ÿä¸€ç”Ÿäº§ã€‚
2. åˆ¶å®šä¸‰ç§å¸ƒå±€æ–¹æ¡ˆï¼ˆArabicï¼ŒRussianï¼ŒUkrainianå½’ä¸ºä¸€ç§ï¼›Chineseï¼ˆZhuyinï¼‰å’ŒKoreanä¸ºä¸€ç§ï¼›Japaneseä¸ºä¸€ç§ï¼‰ï¼Œå•ç‹¬å¼€å­”ã€‚
3. é”®å¸½å°åˆ·ä¸åŒè¯­è¨€çš„æ–‡æ¡ˆã€‚
4. MacOSå¼€å‘è¯­è¨€è¾“å…¥è½¯ä»¶é€‚é…ä¸åŒé”®ç›˜çš„è¯­è¨€è¾“å…¥ã€‚

å…¶ä¸­2ã€3ã€4é¡¹éƒ½æ˜¯ä¸ºäº§å“çš„å…¨çƒåŒ–æœåŠ¡ã€‚


## å…¨çƒåŒ–=å›½é™…åŒ–i18n+æœ¬åœ°åŒ–l10n

[https://en.wikipedia.org/wiki/Internationalization_and_localization](https://en.wikipedia.org/wiki/Internationalization_and_localization)

![](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/globalization.png)

1. äº§å“è®¾è®¡å’Œå¼€å‘éƒ¨ç½²éœ€è¦è€ƒè™‘å›½é™…åŒ–i18nï¼š
    1. å¤šè¯­è¨€ã€‚
    2. å¤šå¸ƒå±€ï¼Œå¦‚é˜¿æ‹‰ä¼¯è¯­çš„RTLã€‚
    3. å¤šè´§å¸ã€‚
    4. å…¨çƒå¤šåœ°åŒºå¤šæœºæˆ¿éƒ¨ç½²ï¼ˆç¦»ç”¨æˆ·è¶Šè¿‘æœåŠ¡ä½“éªŒè¶Šå¥½ï¼Œæ•°æ®ç‰©ç†å­˜å‚¨éš”ç¦»ç¬¦åˆå„ä¸ªå›½å®¶æ•°æ®å®‰å…¨è¦æ±‚ï¼‰ã€‚
2. äº§å“æœ¬åœ°åŒ–L10Næ˜¯å›½é™…åŒ–åçš„**å¯é€‰**æµç¨‹ï¼Œéœ€è¦å¼•å…¥**æœ¬åœ°åŒ–å›¢é˜Ÿ**è½¬åŒ–å’Œè´¨é‡éªŒæ”¶ï¼Œå†æŠ•å…¥æœ¬åœ°åŒ–å¸‚åœºï¼š
    1. æœ¬åœ°åŒ–æ­¥éª¤æ˜¯å¯é€‰çš„ï¼Œå¦‚è‹±ç¾äº§å“UIï¼Œè¯­è¨€åŸºæœ¬ä¸€è‡´å¯äº’é€šã€‚æœ¬åœ°åŒ–æŠ•å…¥å°‘ã€‚
    2. ä¸­æ–‡åœ°åŒºç­‰æœ‰ç®€ä½“ç¹ä½“ï¼Œä¸åŒåœ°åŒºç”¨è¯­ä¹ æƒ¯ä¸ä¸€æ ·ã€‚ä¹Ÿè¦ç‰¹åˆ«å…¼é¡¾ï¼Œå¦‚é¦™æ¸¯çš„ç²¤è¯­å’Œå¹¿å·çš„ç²¤è¯­ï¼Œåœ¨ä¸€äº›ç”¨è¯ä¸Šæœ‰åŒºåˆ«ï¼Œåƒå¸ç®¡ï¼ˆå¹¿å·ï¼‰ï¼é¥®ç­’ï¼ˆé¦™æ¸¯ï¼‰ï¼Œä½ å¯ä»¥çœ‹[è¿™é‡Œ](https://www.zhihu.com/question/20663233)ã€‚
    3. é˜¿æ‹‰ä¼¯è¯­ã€å¸Œä¼¯æ¥è¯­ç­‰åœ°åŒºRTLçš„é˜…è¯»ä¹ æƒ¯ï¼Œå¯¹äº§å“æ”¹åŠ¨è¾ƒå¤§éœ€è¦ç‰¹æ®Šé€‚é…ã€‚


## å›½é™…åŒ–

äº§å“é¢å‘å…¨çƒç”¨æˆ·ï¼Œéœ€è¦åšè¯­è¨€é€‚é…ï¼Œé’ˆå¯¹ä¸åŒå›½å®¶åœ°åŒºçš„ç”¨æˆ·æä¾›å¯¹åº”è¯­è¨€çš„ç‰ˆæœ¬ã€‚æœ¬è´¨æ˜¯**æ–‡æœ¬æ›¿æ¢**ï¼Œä¹Ÿè¦è€ƒè™‘æ–‡æœ¬é˜…è¯»æ–¹å‘ï¼Œæ¯”å¦‚é˜¿æ‹‰ä¼¯è¯­å’Œå¸Œä¼¯æ¥è¯­æ˜¯ä»å³åˆ°å·¦ã€‚

å¯ä»¥çœ‹ä¸‹Appleçš„åšæ³•ï¼Œå¯¹ä¸åŒå›½å®¶åœ°åŒºæä¾›ä¸åŒæœåŠ¡

- Apple US å¯¹åº”é“¾æ¥ <https://www.apple.com/>
- Apple CN  å¯¹åº”é“¾æ¥ <https://www.apple.com.cn/>
- Apple HK å¯¹åº”é“¾æ¥ <https://www.apple.com/hk/en/>

å¸¸è§åœ°åŒºè¯­è¨€å¯¹åº”å…³ç³»å¯ä»¥çœ‹[wikipedia](https://zh.wikipedia.org/zh-hans/%E5%9C%8B%E5%AE%B6%E5%9C%B0%E5%8D%80%E4%BB%A3%E7%A2%BC)

## Intl

MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl

æµè§ˆå™¨ä¸­çš„ `Intl` æ˜¯ä¸€ä¸ªå†…ç½®çš„ JavaScript å¯¹è±¡ï¼Œç”¨äºå›½é™…åŒ–ï¼ˆInternationalizationï¼‰æ”¯æŒã€‚å®ƒæä¾›äº†å¤„ç†æ—¥æœŸã€æ—¶é—´ã€æ•°å­—æ ¼å¼åŒ–ä»¥åŠè´§å¸å’Œè¯­è¨€çš„èƒ½åŠ›ï¼Œä»¥ä¾¿ç½‘ç«™èƒ½å¤Ÿæ ¹æ®ç”¨æˆ·çš„è¯­è¨€å’Œåœ°åŒºä¹ æƒ¯æ¥æ˜¾ç¤ºå†…å®¹ã€‚
åœ¨ JavaScript ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `Intl` å¯¹è±¡æ¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. æ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶é—´ï¼š ä½¿ç”¨ `Intl.DateTimeFormat` å¯¹è±¡å¯ä»¥æ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶é—´ï¼Œå¹¶æ ¹æ®ç”¨æˆ·çš„åœ°åŒºåå¥½æ˜¾ç¤ºæ—¥æœŸå’Œæ—¶é—´ã€‚
2. æ ¼å¼åŒ–æ•°å­—ï¼š ä½¿ç”¨ `Intl.NumberFormat` å¯¹è±¡å¯ä»¥æ ¼å¼åŒ–æ•°å­—ï¼Œå¹¶æ ¹æ®ç”¨æˆ·çš„åœ°åŒºåå¥½æ˜¾ç¤ºæ•°å­—ã€‚
3. å¤„ç†è´§å¸ï¼š ä½¿ç”¨ `Intl.NumberFormat` å¯¹è±¡ç»“åˆæŒ‡å®šçš„è´§å¸ä»£ç å¯ä»¥æ ¼å¼åŒ–è´§å¸ï¼Œå¹¶æ ¹æ®ç”¨æˆ·çš„åœ°åŒºåå¥½æ˜¾ç¤ºè´§å¸ã€‚
4. è¯­è¨€å’ŒåŒºåŸŸè®¾ç½®ä¿¡æ¯ï¼š ä½¿ç”¨ `Intl.getCanonicalLocales` æ–¹æ³•å¯ä»¥è·å–æ”¯æŒçš„è¯­è¨€å’ŒåŒºåŸŸè®¾ç½®ä¿¡æ¯

å…³äºæ ‡ç‚¹ç¬¦å·ï¼Œé€šå¸¸åœ¨å›½é™…åŒ–çš„ç¯å¢ƒä¸‹ï¼Œæ ‡ç‚¹ç¬¦å·ä½¿ç”¨è‹±æ–‡æ˜¯æ¯”è¾ƒå¸¸è§çš„åšæ³•ï¼Œå› ä¸ºè‹±æ–‡æ ‡ç‚¹ç¬¦å·åœ¨å…¨çƒèŒƒå›´å†…éƒ½æœ‰é€šç”¨æ€§ï¼Œå¯ä»¥é¿å…å› ä¸ºåœ°åŸŸå·®å¼‚è€Œå¼•èµ·çš„è¯¯è§£ã€‚åœ¨ `Intl` å¯¹è±¡ä¸­ï¼Œä¸€èˆ¬ä¸ä¼šç›´æ¥æ¶‰åŠåˆ°æ ‡ç‚¹ç¬¦å·çš„å¤„ç†ï¼Œè€Œæ˜¯ä¸»è¦ç”¨äºå¤„ç†æ—¥æœŸã€æ—¶é—´ã€æ•°å­—å’Œè´§å¸ç­‰æ ¼å¼åŒ–éœ€æ±‚ã€‚

# å‰ç½®çŸ¥è¯†

## è¯­è¨€æ ‡è¯†

å…¨åœ°çƒæœ‰ N ä¸ªæ°‘æ—ï¼Œæœ‰çš„æ°‘æ—æœ‰è‡ªå·±çš„è¯­è¨€ï¼Œæœ‰çš„æ°‘æ—ç”¨å…¶ä»–å›½å®¶æ°‘æ—ä¼ é€’è¿‡æ¥çš„è¯­è¨€ï¼ŒèåŒ–å¸æ”¶ç„¶åå‘å±•è‡ªå·±çš„æ–‡å­—ã€‚

æŒ‰ç…§ [ISO æ ‡å‡†](https://zh.m.wikipedia.org/wiki/ISO_639-1)ï¼Œè¯­è¨€å¯ä»¥ç”¨å¤§ç±»+å°ç±»è¡¨ç¤ºï¼Œæ¯”å¦‚ **zh** å°±æ˜¯æ±‰è¯­ï¼Œæ˜¯ä¸€ä¸ªå¤§ç±»ã€‚è€Œ **zh-CN** å°±æ˜¯ç®€ä½“ä¸­æ–‡çš„ç¼©å†™ï¼Œæ–°åŠ å¡åäººä¼—å¤šä¹…äº†å°±æœ‰ **zh-SG**ï¼Œè¡¨ç¤ºçš„æ˜¯æ–°åŠ å¡ä½¿ç”¨çš„ä¸­æ–‡ã€‚å…¶æ¬¡è¿˜æœ‰ **zh-HK/zh-TW å’Œ zh-Hant/zh-Hans** ç­‰ç­‰ã€‚

è¯­è¨€å£°æ˜æ˜¯ä¸‰æ®µå¼ç»“æ„ `[language]-[script]-[region]`ï¼Œå¦‚ zh-Hans-CN è¡¨ç¤ºä¸­å›½åœ°åŒºç®€ä½“ä¸­æ–‡ï¼Œzh-Hant è¡¨ç¤ºæ‰€æœ‰ä¸­æ–‡ç¹ä½“ã€‚

[Language Code Table](http://www.lingoes.net/zh/translator/langcode.htm)

> ä¸€èµ·æ¥çœ‹ä¸‹è‹¹æœå®˜ç½‘æ˜¯å¦‚ä½•é€‚é…å¤šå›½è¯­è¨€çš„
>  
> - æ¾³é—¨apple [https://www.apple.com/mo/](https://www.apple.com/mo/)
> - é¦™æ¸¯apple
> - è‹±æ–‡ [https://www.apple.com/hk/en/](https://www.apple.com/hk/en/)
> - ä¸­æ–‡ [https://www.apple.com/hk/](https://www.apple.com/hk/)
> - ä¸­å›½å¤§é™†åœ°åŒºapple [https://www.apple.com.cn/](https://www.apple.com.cn/)
> - å°æ¹¾apple [https://www.apple.com/tw/](https://www.apple.com/tw/)
> - æ–°åŠ å¡apple [https://www.apple.com/sg/](https://www.apple.com/sg/)
> - æ—¥æœ¬apple [https://www.apple.com/jp/](https://www.apple.com/jp/)
>  
> å¯ä»¥çœ‹åˆ°æœ‰çš„æ˜¯æ ¹åŸŸåä¸‹é€šè¿‡ ISO åœ°åŒºçš„ path æ¯”å¦‚ **/hk/** è¿™æ ·æ¥åŒºåˆ†çš„ï¼Œæœ‰çš„æ˜¯ç›´æ¥æ¢åŸŸåï¼Œæ¯”å¦‚ä¸­å›½å¤§é™†åœ°åŒºã€‚

## æ–‡å­—é˜…è¯»é¡ºåº

æŒ‰ç…§æ™®é€šçš„ä¸­æ–‡å’Œè‹±æ–‡é¡ºåºï¼Œéƒ½æ˜¯ LTRï¼Œä¸Šåˆ°ä¸‹ï¼Œéƒ½æ˜¯ä¸–ç•ŒèŒƒå›´é€šç”¨çš„ã€‚

è€Œ ar é˜¿æ‹‰ä¼¯è¯­ï¼Œur ä¹Œéƒ½è¯­ï¼Œhe å¸Œä¼¯æ¥è¯­éƒ½æ˜¯ç‰¹æ®Šçš„ä»å³åˆ°å·¦ï¼Œå³ RTL çš„ä¸€èˆ¬ä¼šé€šè¿‡æ ‡ç­¾çš„ dir å±æ€§æ ‡è¯†ï¼Œæ¯”å¦‚ä¸‹é¢çš„è§£é‡Š [HTML dir Attribute](https://www.w3schools.com/tags/att_global_dir.asp)ã€‚

![ä¸åŒè¯­è¨€æ–‡å­—é˜…è¯»é¡ºåº](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/i18n-text-flow.png)

HEBREW æ˜¯æŒ‡å¸Œä¼¯æ¥è¯­ï¼Œè¿™æ˜¯ä¸€ç§åœ¨ä»¥è‰²åˆ—å¹¿æ³›ä½¿ç”¨çš„è¯­è¨€ï¼Œä¹Ÿæ˜¯çŠ¹å¤ªæ•™çš„å®—æ•™ç»å…¸æ–‡æœ¬çš„åŸå§‹è¯­è¨€ã€‚å®ƒå±äºé˜¿å¤«ç½—äºšç»†äºšè¯­ç³»ï¼Œæœ‰ç€æ‚ ä¹…çš„å†å²å’Œæ–‡åŒ–ä»·å€¼ã€‚**å¸Œä¼¯æ¥è¯­æœ‰å…¶ç‹¬ç‰¹çš„ä¹¦å†™ç³»ç»Ÿï¼Œä»å³å‘å·¦ä¹¦å†™**ã€‚

ä¸Šå›¾çš„æ¦‚å¿µå¾ˆå°‘äººæ™®åŠï¼Œå› ä¸ºéå›½é™…åŒ–äº§å“ä¸éœ€è¦å¤šè¯­è¨€ï¼Œåšéœ€è¦æ”¯æŒæµ·å¤–ä¸šåŠ¡å’Œå…¨çƒåº”ç”¨çš„åŒå­¦å¯ä»¥å¤šäº†è§£ä¸‹ã€‚ä¼ ç»Ÿçš„è‹±æ–‡ã€ä¸­æ–‡ç®€ä½“ã€æ‹‰ä¸æ–‡ç­‰éƒ½æ˜¯ä¸Šå›¾ LATIN çš„é˜…è¯»é¡ºåºï¼Œå¦‚æœç”¨ä¸Š **top**ã€ä¸‹ **bottom**ã€å·¦ **left**ã€å³ **right** ä»£è¡¨æˆ‘ä»¬çš„ä¹ æƒ¯ï¼Œä¹Ÿå°±æ˜¯ **Z** è¿™æ ·çš„é¡ºåºï¼Œå³è¡Œåˆ°è¡Œæ˜¯ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºï¼Œè¡Œå†…é˜…è¯»é¡ºåºæ˜¯ä»å·¦åˆ°å³ã€‚

![æ–‡æ¡£æµå’Œé˜…è¯»é¡ºåº](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/document-flow.png)

å³ leftâ†’rightï¼Œtopâ†’bottom çš„é¡ºåºï¼Œæœ‰ä¸»æ¬¡åˆ†åˆ«ï¼Œleftâ†’right çš„ä¼˜å…ˆçº§é«˜äº topâ†’bottomã€‚

è€ŒWebæ ‡å‡†å¯¹å…¶å®šä¹‰æ˜¯ä¸‹é¢è¿™æ ·çš„

- left = inline-start
- right = inline-end
- top = block-start
- bottom = block-end

è®²ä¸ªç¬‘è¯ï¼Œå¤ä»£ä¹¦ç±å°±æ˜¯æŒ‰ç…§ `writing-mode: vertical-rl` æ’ç‰ˆçš„ã€‚

![joke](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/joke.png)

# å¸ƒå±€

## content-flows

æ¯”å¦‚ `margin: left` æˆ–è€… `text-align: left` åœ¨å¤šè¯­è¨€åœºæ™¯éƒ½æ˜¯ä¸åˆé€‚çš„ï¼Œä½ çš„å·¦å³ä¸æ˜¯å…¶ä»–äººçš„å·¦å³ã€‚

è€Œåº”è¯¥ç”¨ `margin-inline-start` å’Œ `text-align: start` æ›¿ä»£ï¼Œå³ inline è½´å’Œ block è½´ã€‚

```bash
// ä¸‹é¢ä¸¤ä¸¤ç›¸ç­‰ï¼Œè¯·æŠ›å¼ƒleft/right/top/bottomç­‰å±æ€§
// https://web.dev/learn/css/logical-properties/#terminology

margin-left: 1px
margin-inline-start: 1px

margin-right: 1px
margin-inline-end: 1px

margin-top: 1px
margin-block-start: 1px

margin-bottom: 1px
margin-block-end: 1px

text-align: left
text-align: start

text-align: right
text-align: end

max-width: 100px
max-inline-width: 100px
max-inline-size: 150px

max-height: 100px
max-block-width: 100px

padding-left: 1px
padding-inline-start: 1px

padding-top: 1px
padding-block-start: 1px

top: 0.2em;
inset-block-start: 0.2em;

bottom: 0.2em;
inset-block-end: 0.2em;

left: 2px;
inset-inline-start: 2px;

right: 2px;
inset-inline-end: 2px;

border-bottom: 1px solid red;
border-block-end: 1px solid red;

border-bottom-right-radius: 1em;
border-end-end-radius: 1em;

height: 160px;
block-size: 160px;

width: 160px;
inline-size: 160px;

```

![](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/logic-property-mapping.png)

ä¹Ÿå¯ä»¥çœ‹ä¸‹é¢çš„ä¾‹å­
* [https://codepen.io/web-dot-dev/pen/gOxXOLK](https://codepen.io/web-dot-dev/pen/gOxXOLK)
* [https://codepen.io/web-dot-dev/pen/mdMqdOx](https://codepen.io/web-dot-dev/pen/mdMqdOx)

![](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/logic-property-mapping2.png)

å¦‚ä¸Šä¸¤ä¸ªä¾‹å­é€šè¿‡ `margin-inline-start` ç­‰å±æ€§ï¼Œå†åœ¨ HTML å…ƒç´ ä¸Šæ·»åŠ  `dir: rtl` å°±å¯ä»¥å®ç°å¤šè¯­è¨€çš„é˜…è¯»é¡ºåºå…¼å®¹ã€‚

ç”±æ­¤ï¼Œå¸¸è§çš„å¸ƒå±€ä¹Ÿä¼šæ›´æ–°ä¸ºä»¥ä¸‹å½¢å¼ã€‚å¸¸è§çš„ç‰©ç†ç›’æ¨¡å‹ç”¨äºå°ºå¯¸è®¡ç®—ï¼Œé€»è¾‘ç›’æ¨¡å‹ç”¨äºå›½é™…åŒ–å¤„ç†ã€‚

![ç›’å­æ¨¡å‹](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/box-sizing-diff.png)

## writing mode å†³å®š content-flows

ä¸Šé¢å†™äº†æ–‡æ¡£æœ‰inline and block flowï¼Œå¯¹åº”englishçš„leftå’Œrightï¼Œtopå’Œbottomã€‚è€Œ `writing-mode` å¯ä»¥ä¿®æ”¹content-flowsï¼Œæ¯”å¦‚ä¸‹é¢çš„å€¼

```css
/* å…³é”®å€¼ */
writing-mode: horizontal-tb;
writing-mode: vertical-rl;
writing-mode: vertical-lr;
```

å¯ä»¥è¿™ä¹ˆç†è§£ `writing-mode: horizontal-tb` ï¼Œå‰é¢çš„horizontal/verticalæ˜¯æŒ‡çš„inlineè½´çš„æ–¹å‘ï¼Œ

[https://codepen.io/manfredhu/pen/xxWdpaK](https://codepen.io/manfredhu/pen/xxWdpaK)

## viå’Œvb

è§†å£å®½é«˜viewportåœ¨è¿™é‡Œä¹Ÿæœ‰ç‰¹æ®Šå«ä¹‰. æ¯”å¦‚å®½é«˜vwå’Œvhä¹Ÿè¢«å–ä»£ï¼Œç”¨ **vi(viewport inline)å’Œvb(viewport block)** æ›¿ä»£

```css
1%å®½åº¦=1vw=1vi 
1%é«˜åº¦=1vh=1vb
```

## JSçš„scrollLeft

DOMçš„APIå¯ä»¥é€šè¿‡ **Element.scrollLeft** è·å–åˆ°å…ƒç´ æ»šåŠ¨çš„è·ç¦»ï¼Œä¸‹å›¾æ˜¯ä¸€ä¸ªå®é™…ä¾‹å­

![scrollLeftçš„rtl](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/scroll-rtl.png)

è¿™é‡Œåœ¨æœ€ååšäº†ä¸€ä¸ªé®ç½©ï¼ˆç»¿è‰²è¾¹æ¡†åŒºåŸŸï¼‰ï¼Œå†…éƒ¨è“è‰²éƒ¨åˆ†ç±»ä¼¼ä¸€ä¸ªèµ°é©¬ç¯ï¼Œé€šè¿‡overflow:hiddenå°†è“è‰²é«˜äº®éƒ¨åˆ†è¶…å‡ºçš„åŒºåŸŸé®ä½

å½“è“è‰²éƒ¨åˆ†æ»šåŠ¨åˆ°æœ€åï¼Œç»¿è‰²é®ç½©éšè—ï¼Œè¾¾åˆ°ä¸€ä¸ªé®ç›–ï¼Œæ»šåŠ¨åˆ°æœ€åæ¶ˆå¤±çš„æ•ˆæœï¼Œä»£ç å¦‚ä¸‹

```tsx
const ref = document.querySelector('.tiktok-table__container') // çˆ¶èŠ‚ç‚¹ï¼Œè“è‰²åŒºåŸŸ
const ref2 = document.querySelector('.tiktok-table__container > table') // å­èŠ‚ç‚¹ï¼Œè¡¨æ ¼åŒºåŸŸ
const bufferWidth = 30 // ç•™ä¸€ç‚¹bufferç©ºé—´
if (ref && ref2 && ref.clientWidth + ref.scrollLeft >= ref2.clientWidth - bufferWidth) {
  // æ»šåŠ¨åˆ°æœ€åéšè—ç»¿è‰²é®ç½©
  setTableRightMask(false)
} else {
  setTableRightMask(true)
}
```

ä½†æ˜¯åœ¨RTLä¸‹ï¼Œç¥å¥‡çš„äº‹æƒ…å°±å‘ç”Ÿäº†ï¼ŒscrollLeftå±…ç„¶æ˜¯è´Ÿæ•°

è¿™æ˜¯å› ä¸ºRTLçš„å®ç°æ˜¯é€šè¿‡HTMLæ ‡ç­¾å¢åŠ å±æ€§ `dir="rtlâ€` å®ç°çš„ï¼Œä¼šå°†æ–‡æ¡£å®Œå…¨ç¿»è½¬è¿‡æ¥ï¼Œæ‰€ä»¥scrollLeftå°±ä¼šæ˜¯è´Ÿæ•°ã€‚å› ä¸ºæ­¤æ—¶(0, 0)è¿™ä¸ªåŸç‚¹å·²ç»æ˜¯è¡¨æ ¼å³è¾¹äº†

![scrollLeftçš„è´Ÿæ•°æƒ…å†µ](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/scroll-left-negative.gif)

è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå–ç»å¯¹å€¼å°±å¥½ï¼Œè¿™æ ·å°±å¿½ç•¥äº†æ–¹å‘çš„å½±å“

# locale

æ ¹æ®ISOæ ‡å‡†å¯¹å…¨çƒå›½å®¶åœ°åŒºè¿›è¡Œåˆ’åˆ†[https://en.wikipedia.org/wiki/ISO_3166-2](https://en.wikipedia.org/wiki/ISO_3166-2)ã€‚å¦‚ "US" è¡¨ç¤ºç¾å›½ï¼Œ"CN" è¡¨ç¤ºä¸­å›½ã€‚è¿˜æœ‰å¸¸è§çš„å¦‚ **zh-CN**, **en-US**, **en-GB** ç­‰ã€‚

- **CN** æ˜¯å›½å®¶åœ°åŒºç ï¼Œæ ¹æ®å›½é™…æ ‡å‡† ISO 3166-1 è§„å®šçš„å›½å®¶å’Œåœ°åŒºä»£ç ã€‚ISO 3166-1 æ˜¯ç”¨äºæ ‡è¯†å›½å®¶å’Œåœ°åŒºçš„å›½é™…æ ‡å‡†ï¼Œæ¯ä¸ªå›½å®¶æˆ–åœ°åŒºéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ä¸¤å­—æ¯ä»£ç ã€‚"CN" ä»£è¡¨ä¸­åäººæ°‘å…±å’Œå›½ï¼ˆPeople's Republic of Chinaï¼‰ï¼Œå³ä¸­å›½ã€‚
- **zh-CN** æ˜¯è¯­è¨€åœ°åŒºç ï¼Œå®ƒé€šå¸¸ç”¨äºè¡¨ç¤ºä¸­æ–‡ï¼ˆ"zh" ä»£è¡¨ä¸­æ–‡ï¼‰ä»¥åŠç‰¹å®šçš„åœ°åŒºæˆ–å›½å®¶ï¼Œè¿™é‡Œ "CN" ä»£è¡¨ä¸­å›½ã€‚"zh" ä»£è¡¨ä¸­æ–‡ï¼Œè¿™æ˜¯æ ¹æ®å›½é™…æ ‡å‡† ISO 639-1 è§„å®šçš„è¯­è¨€ä»£ç ã€‚ISO 639-1 æ˜¯ç”¨äºæ ‡è¯†è¯­è¨€çš„å›½é™…æ ‡å‡†ï¼Œæ¯ä¸ªè¯­è¨€éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ä¸¤å­—æ¯ä»£ç ã€‚"zh" ä»£è¡¨ä¸­æ–‡ï¼Œä½†ä¸åŒºåˆ†ä¸­æ–‡çš„ä¸åŒæ–¹è¨€ï¼Œå¦‚æ™®é€šè¯å’Œç²¤è¯­ã€‚
- **zh-Hans-CN** è¡¨ç¤ºä¸­å›½å¤§é™†åœ°åŒºçš„ç®€ä½“ä¸­æ–‡ã€‚è¿˜æœ‰ **zh-Hans-SG** å¯ç”¨äºè¡¨ç¤ºæ–°åŠ å¡çš„å®˜æ–¹ç®€åŒ–ä¸­æ–‡ï¼Œ**zh-Hans-TW** å¯ç”¨äºè¡¨ç¤ºå°æ¹¾çš„å®˜æ–¹ç®€åŒ–ä¸­æ–‡ã€‚


## Intl. Locale

ä¸¾ä¸ªğŸŒ°è¯´ä¸‹Intl APIå¯¹äºlocaleçš„å®šä¹‰

```jsx
const korean = new Intl.Locale('ko', {
  script: 'Kore',
  region: 'KR',
  hourCycle: 'h23',
  calendar: 'gregory',
});

const japanese = new Intl.Locale('ja-Jpan-JP-u-ca-japanese-hc-h12');

console.log(korean.baseName, japanese.baseName);
// Expected output: "ko-Kore-KR" "ja-Jpan-JP"
```

å¯ä»¥çœ‹åˆ°Intl. Localeå°±æ˜¯æŠŠä¼ å…¥çš„å­—ç¬¦ä¸²æ‹†è§£ä¸º `[language]-[script]-[region]` çš„ç»„æˆã€‚

- **ja**ï¼šä»£è¡¨è¯­è¨€ä»£ç ï¼Œè¡¨ç¤ºæ—¥è¯­ï¼ˆJapaneseï¼‰ã€‚
- **Jpan**ï¼šä»£è¡¨è„šæœ¬ä»£ç ï¼Œè¡¨ç¤ºä½¿ç”¨æ—¥è¯­æ–‡å­—ï¼ˆJapanese scriptï¼‰ã€‚
- **JP**ï¼šä»£è¡¨åœ°åŒºä»£ç ï¼Œè¡¨ç¤ºæ—¥æœ¬ï¼ˆJapanï¼‰ã€‚

è¿™é‡Œçš„ `u-ca-japanese` è¡¨ç¤º Unicode calendar ä¹Ÿå°±æ˜¯æ—¥å†æ ¼å¼ï¼ˆæ—¥æœ¬æ—¥å†ä¸ä¼—ä¸åŒï¼‰ï¼Œ`hc` è¡¨ç¤º hourCycleï¼Œè¿™é‡Œ `hc-h12` è¡¨ç¤º12å°æ—¶åˆ¶ã€‚`u-ca-japanese` å’Œ `hc-h12` çš„é¡ºåºæ— å…³ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚ä¸‹ä¸¤ç§ç”¨æ³•å®Œå…¨ç­‰ä»·ï¼š

```jsx
const japanese = new Intl.Locale('ja-Jpan-JP-u-ca-japanese-hc-h12');
const japanese2 = new Intl.Locale('ja-Jpan-JP-u-hc-h12-ca-japanese');
```

`-u`ï¼ˆunicodeï¼‰å¯ä»¥ç†è§£ä¸ºé¢å¤–æ‰©å±•æ’ä»¶ï¼Œæ’ä»¶ç³»ç»Ÿæ”¯æŒä»¥ä¸‹æ‰©å±•ï¼Œå¦‚ä¸Šä½¿ç”¨calendaræ‰©å±•å’ŒhourCycleæ‰©å±•ã€‚


| | |
| --- | --- |
| [calendar](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/calendar) | caÂ (extension) |
| [caseFirst](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/caseFirst) | kfÂ (extension) |
| [collation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/collation) | coÂ (extension) |
| [hourCycle](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/hourCycle) | hcÂ (extension) |
| [numberingSystem](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/numberingSystem) | nuÂ (extension) |
| [numeric](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/numeric) | knÂ (extension) |

## è¯­è¨€å£°æ˜

```html
<html lang="en-US">
<!-- è¯´æ˜é¡µé¢è¯­è¨€æ˜¯ç¾å¼è‹±æ–‡ -->
<p>I felt some <span lang="de">schadenfreude</span>.</p> <!-- langä¸æ˜¯åªæœ‰htmlæ ‡ç­¾æ‰æœ‰, å…¶ä»–æ ‡ç­¾ä¹Ÿå¯ä»¥æ·»åŠ  -->
<a href="/path/to/german/version" hreflang="de" lang="de">Deutsche Version</a> <!-- aæ ‡ç­¾ä¸Šå¯ä»¥ç”¨langè¡¨ç¤ºæ˜¾ç¤ºçš„æ–‡æœ¬çš„è¯­è¨€, ä¹Ÿå¯ä»¥ç”¨hreflangè¡¨ç¤ºè·³è½¬é¡µé¢çš„è¯­è¨€ -->
```

## languageè®¾ç½®

è¯­è¨€å±æ€§é€šå¸¸ä»£è¡¨è¯­è¨€æ ‡è¯†ç¬¦çš„ä¸»è¦éƒ¨åˆ†ã€‚å®ƒæ ‡è¯†äº†ç”¨äºè¡¨è¾¾è¯­è¨€çš„åŸºæœ¬ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œåœ¨ BCP 47 æ ‡å‡†ä¸­ï¼Œè¯­è¨€æ ‡è¯†ç¬¦é€šå¸¸åŒ…å«äº†è¯­è¨€çš„ä¸»è¦ä»£ç éƒ¨åˆ†ï¼Œä¾‹å¦‚ "en" ä»£è¡¨è‹±è¯­ï¼Œ"es" ä»£è¡¨è¥¿ç­ç‰™è¯­ã€‚

```jsx
const locales = ['en', 'de', 'ja'];
const displayNames = new Intl.DisplayNames('en-US', { type: 'language' });
locales.forEach(locale => console.log(displayNames.of(locale)));

// English
// German
// Japanese
```

å¦‚æœå·²ç»æœ‰å¦‚ä¸Šä»£ç ï¼Œå†è¿›ä¸€æ­¥ç»™è¿™äº›å†…å®¹æ·»åŠ æ ·å¼æ˜¯éå¸¸ç®€å•çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨CSSçš„é€‰æ‹©å™¨ã€‚å¦‚ `[lang|="fr"]` æˆ–è€… `:lang(fr)`ã€‚

`[lang|="fr"]` é€‰æ‹©å±æ€§ `lang=fr` æˆ–è€… langå±æ€§ä»¥frå¼€å¤´çš„å…ƒç´ ï¼Œå¦‚ `lang=fr-CA`ã€‚


## scriptè®¾ç½®

è„šæœ¬å±æ€§æ˜¯è¯­è¨€æ ‡è¯†ç¬¦çš„å¯é€‰éƒ¨åˆ†ï¼Œè¡¨ç¤ºä½¿ç”¨çš„ä¹¦å†™ç³»ç»Ÿæˆ–æ–‡å­—çš„é£æ ¼ã€‚è¿™æ˜¯ä¸€ä¸ªè¾…åŠ©ä¿¡æ¯ï¼Œç”¨äºæ›´ç²¾ç¡®åœ°è¡¨ç¤ºç‰¹å®šè¯­è¨€çš„ä¹¦å†™ä¹ æƒ¯ã€‚ä¾‹å¦‚ï¼Œ"Hans" ä»£è¡¨ç®€ä½“ä¸­æ–‡ï¼Œ"Latn" ä»£è¡¨æ‹‰ä¸æ–‡ã€‚

scriptçš„ofæ”¯æŒä¼ å…¥[BCP47è§„èŒƒçš„äºŒå­—ç ](https://en.wikipedia.org/wiki/IETF_language_tag)ï¼Œå¦‚zh

```jsx
const scriptNames = new Intl.DisplayNames('en-US', { type: 'script' });
console.log(scriptNames.of('Hans')); // outputï¼šSimplified
console.log(scriptNames.of('Hant')); // outputï¼šTraditional
console.log(scriptNames.of('Latn')); // outputï¼šLatin

const scriptNames = new Intl.DisplayNames('zh-CN', { type: 'script' });
console.log(scriptNames.of('Hans')); // outputï¼šç®€ä½“
console.log(scriptNames.of('Hant')); // outputï¼šç¹ä½“
console.log(scriptNames.of('Latn')); // outputï¼šæ‹‰ä¸æ–‡
```

## regionè®¾ç½®

regionçš„ofæ–¹æ³•æ”¯æŒä¼ å…¥[https://en.wikipedia.org/wiki/ISO_3166-2](https://en.wikipedia.org/wiki/ISO_3166-2) é‡Œçš„å›½å®¶äºŒå­—ç 

```jsx
const regionNamesInEnglish = new Intl.DisplayNames(['en'], { type: 'region' });
const regionNamesInTraditionalChinese = new Intl.DisplayNames(['zh-Hant'], { type: 'region' });
console.log(regionNamesInEnglish.of('US'));
// Expected output: "United States"
console.log(regionNamesInTraditionalChinese.of('US'));
// Expected output: "ç¾åœ‹"
```

# æ–‡æœ¬

## é˜…è¯»é¡ºåºå£°æ˜

![æ–‡æœ¬çš„é˜…è¯»é¡ºåºå£°æ˜](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/text-flow.png)

### htmlæ ‡ç­¾dirå±æ€§

å¯ä»¥é€šè¿‡htmlæ ‡ç­¾çš„dirå±æ€§è®¾ç½®

```jsx
<html dir="ltr">
<html dir="rtl">
```

### csså±æ€§[writing-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/writing-mode)

```css
writing-mode: horizontal-tb;
writing-mode: vertical-lr;
writing-mode: vertical-rl;
```

æ–‡æœ¬è¡Œçš„å¸ƒå±€æ–¹å‘ï¼Œä»¥åŠå—çš„æ’åˆ—æ–¹å‘ã€‚å¦‚æœæƒ³ä½œç”¨åœ¨æ•´ä¸ªæ–‡æ¡£éœ€è¦è®¾ç½®htmlæ ‡ç­¾ï¼Œåˆ™å…¨å±€ç”Ÿæ•ˆã€‚

**ç¬¬ä¸€ä¸ªå±æ€§horizontal/verticalæŒ‡çš„æ˜¯è¡Œå—çš„æ’åˆ—ï¼Œç¬¬äºŒä¸ªå±æ€§åˆ™æ˜¯æŒ‡æ–‡æœ¬å†…å®¹çš„æµå‘ï¼ˆcontent flowsï¼‰**

![](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/block-layout.png)
![](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/inline-layout.png)

## ç¿»è½¬

å½¢å¦‚ **?** è¿™ç§ç¬¦å·ç±»ï¼Œåœ¨å¤šè¯­è¨€ä¸‹æ˜¯ä¸ä¸€æ ·çš„ã€‚

æ¯”å¦‚aré˜¿æ‹‰ä¼¯è¯­å’Œurä¹Œå°”éƒ½æ–¯è¯­é—®å·æ˜¯RTLçš„ï¼Œå³ **[ØŸ](https://zh.m.wiktionary.org/wiki/%D8%9F)** æ˜¯OKçš„ã€‚

è€Œheå¸Œä¼¯æ¥è¯­æ˜¯LTRçš„ï¼Œå³ **?** æ˜¯OKçš„ã€‚

æ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ï¼Ÿä¸€ä¸ªé—®å·ä¹Ÿèƒ½ç©å‡ºèŠ±æ¥ã€‚


![çº¿ç´¢ç®¡ç†é¡µ-è‹±æ–‡å’Œé˜¿æ‹‰ä¼¯è¯­](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/lead-gen-en.png)

å¸¸è§çš„éœ€è¦RTLçš„è¯­è¨€æœ‰ä¸‹é¢è¿™äº›

1.  **é˜¿æ‹‰ä¼¯è¯­ï¼ˆARï¼‰**ï¼šé˜¿æ‹‰ä¼¯è¯­æ˜¯ä½¿ç”¨ RTL æ–¹å‘ä¹¦å†™çš„æœ€è‘—åçš„è¯­è¨€ä¹‹ä¸€ã€‚å®ƒæ˜¯ä¸­ä¸œå’ŒåŒ—éåœ°åŒºçš„ä¸»è¦è¯­è¨€ï¼Œä»¥åŠä¼Šæ–¯å…°æ•™çš„å®˜æ–¹è¯­è¨€ã€‚
2.  **å¸Œä¼¯æ¥è¯­ï¼ˆHEï¼‰**ï¼šå¸Œä¼¯æ¥è¯­æ˜¯çŠ¹å¤ªäººçš„å®—æ•™å’Œæ–‡åŒ–è¯­è¨€ï¼Œä»¥åŠä»¥è‰²åˆ—çš„å®˜æ–¹è¯­è¨€ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªä½¿ç”¨ RTL æ–¹å‘ä¹¦å†™çš„è¯­è¨€ã€‚
3.  **æ³¢æ–¯è¯­ï¼ˆFAï¼‰**ï¼šæ³¢æ–¯è¯­ï¼Œä¹Ÿç§°ä¸ºæ³•å°”è¥¿è¯­ï¼Œæ˜¯ä¼Šæœ—çš„å®˜æ–¹è¯­è¨€ï¼Œä»¥åŠä¸€äº›ä¸­ä¸œå›½å®¶çš„å®˜æ–¹æˆ–è¾…åŠ©è¯­è¨€ã€‚å®ƒä½¿ç”¨ RTL æ–¹å‘ä¹¦å†™ã€‚
4.  **ä¹Œå°”éƒ½è¯­ï¼ˆURï¼‰**ï¼šä¹Œå°”éƒ½è¯­æ˜¯å·´åŸºæ–¯å¦å’Œå°åº¦çš„å®˜æ–¹è¯­è¨€ä¹‹ä¸€ï¼Œä»¥åŠä¸€ç§ä½¿ç”¨ RTL æ–¹å‘ä¹¦å†™çš„è¯­è¨€ã€‚
5.  **å¸•æ–¯å›¾è¯­ï¼ˆPSï¼‰**ï¼šå¸•æ–¯å›¾è¯­æ˜¯é˜¿å¯Œæ±—çš„å®˜æ–¹è¯­è¨€ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ä½¿ç”¨ RTL æ–¹å‘ä¹¦å†™çš„è¯­è¨€ã€‚

```JS
const rtlLangs = [
  'ar', // é˜¿æ‹‰ä¼¯è¯­
  'ur', // å·´åŸºæ–¯å¦
  'he', // ä»¥è‰²åˆ—
  'he-IL', // å¸Œä¼¯æ¥è¯­(ä»¥è‰²åˆ—)
  'fa-IR', // æ³¢æ–¯è¯­(ä¼Šæœ—)
  'ps' // å¸•æ–¯å›¾è¯­
];
```

## å¤šè¯­è¨€æ–‡æ¡ˆ

l10næœ¬åœ°åŒ–çš„ä¸€ä¸ªæ¯”è¾ƒå¤šå·¥ä½œé‡çš„éƒ¨åˆ†æ˜¯æ–‡æœ¬çš„ç¿»è¯‘ã€‚ä¸€ç§æ–‡æœ¬åˆ°Nç§æ–‡æœ¬çš„ç¿»è¯‘éœ€è¦å¼•å…¥æœ¬åœ°åŒ–å›¢é˜Ÿã€‚æŠ€æœ¯å®ç°ä¸Šé€‰æ‹©ä¹Ÿå¾ˆå¤šã€‚

### ç¨‹åºæ‰“åŒ…åµŒå…¥æ–‡æ¡ˆ

é€šè¿‡ `key: text` æ˜ å°„ï¼Œæ¯”å¦‚ `t('key')` æœ€åç¨‹åºè·‘å‡ºæ¥å°±æ˜¯textæ–‡æ¡ˆï¼Œè¿™ç§æ–¹å¼ä¸ä¼šä¾èµ–å…¶ä»–ä¸œè¥¿ï¼Œè·Ÿæ™®é€šç½‘é¡µä¸€æ ·å†…å®¹éƒ½æ˜¯CDNæ–‡ä»¶ã€‚ç¼ºç‚¹æ˜¯æ–‡æ¡ˆåšä¸ºé™æ€èµ„æºéœ€è¦ç”¨æˆ·é¢å¤–è·å–ï¼Œå¦‚æœå¤„ç†ä¸å¥½æ›¿æ¢é”™è¯¯å°±å±•ç¤º `key` å†…å®¹

* [vue i18n](https://kazupon.github.io/vue-i18n/zh/started.html#html)
* [react i18n](https://react.i18next.com/)


ä»¥ä¸‹ä¾‹å­ä»¥Vueä¸ºä¾‹ï¼Œé…ç½®å¦‚ **en.json, fr.json** ç­‰ç­‰çš„é™æ€é…ç½®æ–‡æ¡ˆï¼Œæ‰“åŒ…åµŒå…¥CDNçš„JSæ–‡ä»¶é‡Œã€‚


[Vue i18n example](https://codesandbox.io/p/sandbox/o7n6pkpwoy?file=%2Fstore.js%3A10%2C14)


### æ¥å£è·å–

ç¨‹åºè¿è¡Œæ—¶é€šè¿‡æ¥å£æ‹¿æ–‡æ¡ˆã€‚å¯ä»¥é€šè¿‡htmlæ ‡ç­¾æ·»åŠ queryå‚æ•° lang=xxx æ ‡è®°é¡µé¢è¯­è¨€ï¼Œæˆ–è€…cookieæ ‡è®°è¯­è¨€é€‰æ‹©ã€‚

### å®æ—¶ç¿»è¯‘æ›¿æ¢

åŠ è½½ç¿»è¯‘çš„è„šæœ¬ï¼Œåœ¨åˆ‡æ¢è¯­è¨€çš„æ—¶å€™æ›¿æ¢æ‰åŠ è½½çš„æ–‡æœ¬ã€‚å¥½å¤„æ˜¯åŠ è½½çš„è„šæœ¬æ˜¯å½“å‰è¯­è¨€æ‰€éœ€è¦çš„ï¼Œä¸ä¼šæœ‰å…¶ä»–è¯­è¨€çš„å†—ä½™ã€‚ç¼ºç‚¹æ˜¯ä¾èµ–ä¸€ä¸ªç¿»è¯‘æœåŠ¡ï¼Œå¦‚æœç¿»è¯‘æœåŠ¡å®•æœºäº†ç½‘é¡µå°±ä¸èƒ½æ­£å¸¸è®¿é—®äº†ã€‚

```
User -> gateway -> SSR -> i18n cache -> read-time translation services(å®æ—¶ç¿»è¯‘æœåŠ¡)
```

## å ä½ç¬¦ä¸å•å¤æ•°å¤„ç†-ICUè¯­æ³•

[DevPal - ICU message editor](https://devpal.co/icu-message-editor/?data=I%20have%20%7Bnum%2C%20plural%2C%20one%7B%7Bnumber%7D%20%23%20apple%7D%20other%7B%23%20apples%7D%7D%2Cbut%20it%27s%20too%20small%0A)

ICUè¯­æ³•å³é€šç”¨çš„æœ‰if-elseé€»è¾‘çš„DSLï¼Œå¦‚ä¸‹DSLå¯ä»¥æ ¹æ®ä¼ å…¥çš„å€¼æ¢å–ä¸åŒçš„è¡¨ç¤ºï¼Œå¸¸ç”¨äºå›½é™…åŒ–ä¸šåŠ¡

```tsx
I have {num, plural, one{{number} # apple} other{# apples}},but it's too small
```

![](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/ICU-message-editor.png)

## Intl. Segmenter åˆ†æ®µå™¨

å¦‚æœä½ ç”¨è¿‡vimä¸€å®šçŸ¥é“wï¼ˆwordï¼‰å¯ä»¥ç§»åŠ¨åˆ°ä¸‹ä¸ªå•è¯ã€‚è‹±æ–‡é‡ŒæŠŠæ–‡æœ¬åˆ†ä¸ºå•è¯ã€å¥å­å’Œæ®µè½ã€‚åŒç†ï¼Œä¸­æ–‡ä¹Ÿæ˜¯ã€‚

* **`w`** word ä¸€ä¸ªå•è¯
* **`s`** sentence ä¸€ä¸ªå¥å­
* **`p`** paragraph ä¸€ä¸ªæ®µè½

```jsx
const segmenter = new Intl.Segmenter('en-US', { granularity: 'word' });

const text = 'This is a sample text for demonstration purposes.';

// ä½¿ç”¨ Segmenter å¯¹æ–‡æœ¬è¿›è¡Œåˆ†å‰²
const segments = [...segmenter.segment(text)];
console.log(segments);

// 0: {segment: 'This', index: 0, input: 'This is a sample text for demonstration purposes.', isWordLike: true}
// 1: {segment: ' ', index: 4, input: 'This is a sample text for demonstration purposes.', isWordLike: false}
// 2: {segment: 'is', index: 5, input: 'This is a sample text for demonstration purposes.', isWordLike: true}
// 3: {segment: ' ', index: 7, input: 'This is a sample text for demonstration purposes.', isWordLike: false}
// 4: {segment: 'a', index: 8, input: 'This is a sample text for demonstration purposes.', isWordLike: true}
// 5: {segment: ' ', index: 9, input: 'This is a sample text for demonstration purposes.', isWordLike: false}
// 6: {segment: 'sample', index: 10, input: 'This is a sample text for demonstration purposes.', isWordLike: true}
// 7: {segment: ' ', index: 16, input: 'This is a sample text for demonstration purposes.', isWordLike: false}
// 8: {segment: 'text', index: 17, input: 'This is a sample text for demonstration purposes.', isWordLike: true}
// 9: {segment: ' ', index: 21, input: 'This is a sample text for demonstration purposes.', isWordLike: false}
// 10: {segment: 'for', index: 22, input: 'This is a sample text for demonstration purposes.', isWordLike: true}
// 11: {segment: ' ', index: 25, input: 'This is a sample text for demonstration purposes.', isWordLike: false}
// 12: {segment: 'demonstration', index: 26, input: 'This is a sample text for demonstration purposes.', isWordLike: true}
// 13: {segment: ' ', index: 39, input: 'This is a sample text for demonstration purposes.', isWordLike: false}
// 14: {segment: 'purposes', index: 40, input: 'This is a sample text for demonstration purposes.', isWordLike: true}
// 15: {segment: '.', index: 48, input: 'This is a sample text for demonstration purposes.', isWordLike: false}
```

`Intl. Segmenter`åˆ†æ®µå™¨å¯ä»¥æŠŠå¥å­ã€æ®µè½ã€æ–‡ç« ç­‰æŒ‰ç…§é…ç½®åˆ‡å‰²ä¸ºä¸åŒçš„segmentæ•°ç»„ï¼Œç»“æ„ç±»ä¼¼æ­£åˆ™ï¼Œæœ‰segmentå±æ€§ã€‚

å†ä¸¾ä¸ªä¾‹å­ï¼Œä¸­æ–‡è¯­å¢ƒä¸‹**çœŸçš„**å…¶å®æ˜¯ä¸€ä¸ªè¯ã€‚


```JS
// åˆ›å»ºåˆ†æ®µå™¨ï¼ŒæŒ‡å®šè¯­è¨€ç¯å¢ƒå’Œåˆ†æ®µç±»å‹ä¸º'word'
const segmenter = new Intl.Segmenter(['en', 'zh'], { granularity: 'word' });

// è¦åˆ†å‰²çš„å­—ç¬¦ä¸²
const text = 'Helloä¸–ç•ŒHello world';

// ä½¿ç”¨åˆ†æ®µå™¨åˆ†å‰²å­—ç¬¦ä¸²
const segments = segmenter.segment(text);

// éå†å¹¶æ‰“å°æ¯ä¸ªåˆ†æ®µçš„ç»“æœ
for (const segment of segments) {
    console.log(`Segment: ${segment.segment}, Index: ${segment.index}, IsWordLike: ${segment.isWordLike}`);
}
// Segment: Hello, Index: 0, IsWordLike: true
// Segment: ä¸–ç•Œ, Index: 5, IsWordLike: true
// Segment: Hello, Index: 7, IsWordLike: true
// Segment:  , Index: 12, IsWordLike: false
// Segment: world, Index: 13, IsWordLike: true
```

```jsx
const str = "æˆ‘çœŸçš„å¾ˆå¼º, å¼ºå“¥çš„å¼º";
const segmenterJa = new Intl.Segmenter("zh-CN", { granularity: "word" });

const segments = segmenterJa.segment(str);
console.log(Array.from(segments));

// 0: {segment: 'æˆ‘', index: 0, input: 'æˆ‘çœŸçš„å¾ˆå¼º, å¼ºå“¥çš„å¼º', isWordLike: true}
// 1: {segment: 'çœŸçš„', index: 1, input: 'æˆ‘çœŸçš„å¾ˆå¼º, å¼ºå“¥çš„å¼º', isWordLike: true}
// 2: {segment: 'å¾ˆ', index: 3, input: 'æˆ‘çœŸçš„å¾ˆå¼º, å¼ºå“¥çš„å¼º', isWordLike: true}
// 3: {segment: 'å¼º', index: 4, input: 'æˆ‘çœŸçš„å¾ˆå¼º, å¼ºå“¥çš„å¼º', isWordLike: true}
// 4: {segment: ',', index: 5, input: 'æˆ‘çœŸçš„å¾ˆå¼º, å¼ºå“¥çš„å¼º', isWordLike: false}
// 5: {segment: ' ', index: 6, input: 'æˆ‘çœŸçš„å¾ˆå¼º, å¼ºå“¥çš„å¼º', isWordLike: false}
// 6: {segment: 'å¼º', index: 7, input: 'æˆ‘çœŸçš„å¾ˆå¼º, å¼ºå“¥çš„å¼º', isWordLike: true}
// 7: {segment: 'å“¥', index: 8, input: 'æˆ‘çœŸçš„å¾ˆå¼º, å¼ºå“¥çš„å¼º', isWordLike: true}
// 8: {segment: 'çš„', index: 9, input: 'æˆ‘çœŸçš„å¾ˆå¼º, å¼ºå“¥çš„å¼º', isWordLike: true}
// 9: {segment: 'å¼º', index: 10, input: 'æˆ‘çœŸçš„å¾ˆå¼º, å¼ºå“¥çš„å¼º', isWordLike: true}

```

# æ—¶é—´&æ—¶åŒº

å›½é™…åŒ–ä¼šæœ‰æ—¶åŒºåˆ’åˆ†é—®é¢˜, æ—¶åŒºäº§ç”Ÿäºå¤ªé˜³ä¸‹åœ°çƒè‡ªè½¬å¯¼è‡´çš„æ˜¼å¤œäº¤æ›¿. è€Œå…¨çƒä¸åŒå›½å®¶åœ°åŒºå½“åœ°æ—¶é—´ä¸UTCæ—¶é—´æ˜¯ä¸ä¸€è‡´çš„. å…¨çƒå¤§éƒ¨åˆ†äººéƒ½å¯ä»¥è¯´è‡ªå·±æ—©ä¸Šèµ·åºŠ, æ™šä¸Šç¡è§‰. ä¸Šä¸‹æ–‡æ˜¯é€šçš„. ä½†æ˜¯è¿™ä¸ªæ—©ä¸Šçš„æ—¶é—´æ ¹æ®UTCæ¥å®šä¹‰æ˜¯ä¸ä¸€æ ·çš„

## GMTå’ŒUTC

- **GTM = Greenwich Mean Timeï¼Œ** GTMæ˜¯è‹±å›½æ ¼æ—å¨æ²»æ—¶é—´ï¼Œä½†æ˜¯ä¸å¤ªé˜³æ—¶åå·®è¾ƒå¤§ï¼Œå·²æˆä¸ºå†å²ä¸å†ä½œä¸ºæ ‡å‡†
- UTC = **åè°ƒä¸–ç•Œæ—¶ï¼ˆUTC: Coordinated Universal Timeï¼‰- ç”±åŸå­é’Ÿæä¾›**

[æ—¶é—´çš„å¾€äº‹--è®°ä¸€æ¬¡ä¸å¤ä»¤æ—¶çš„æ–—æ™ºæ–—å‹‡](https://jiangyixiong.top/2021/05/25/%E6%97%B6%E9%97%B4%E7%9A%84%E5%BE%80%E4%BA%8B%E2%80%94%E2%80%94%E8%AE%B0%E4%B8%80%E6%AC%A1%E4%B8%8E%E5%A4%8F%E4%BB%A4%E6%97%B6%E7%9A%84%E6%96%97%E6%99%BA%E6%96%97%E5%8B%87/)

[GMT æ ‡å‡†æ—¶é—´ å…¨çƒæ—¶åŒºæŸ¥è¯¢](https://time.artjoey.com/cn/)

é€šè¿‡[NTPåè®®](https://zh.wikipedia.org/wiki/%E7%B6%B2%E8%B7%AF%E6%99%82%E9%96%93%E5%8D%94%E5%AE%9A)ï¼Œè®©è®¡ç®—æœºåœ¨å…¨çƒç½‘ç»œé‡Œä¿æŒæ—¶é—´ä¸€è‡´

## Offsetä¸Timezone

-   Offsetå³åç§»é‡ï¼Œæ¯”å¦‚ä¸­å›½åœ¨ä¸œå…«åŒºï¼ŒOffsetæ˜¯`+08:00:00`
-   è€Œä¸œå…«åŒºä¸æ­¢åŒ…æ‹¬ä¸­å›½æ—¶é—´ï¼Œè€Œæ˜¯ä¸€ç»„ä¸œè¥¿ç»ç¬¦åˆä¸€ä¸ªåŒºåŸŸçš„é›†åˆï¼Œæ¯”å¦‚
    ```bash
    ä¸œå…«åŒº = {CSTï¼ˆä¸­å›½æ ‡å‡†æ—¶ï¼‰,SGTï¼ˆæ–°åŠ å¡æ—¶é—´ï¼‰,AWSTï¼ˆæ¾³æ´²è¥¿éƒ¨æ ‡å‡†æ—¶ï¼‰... }
    ```

### å¦‚ä½•è·å–å½“å‰ç”¨æˆ·çš„æ—¶åŒºä¿¡æ¯

```bash
// æ‰€åœ¨åœ°åŒºçš„æ—¶åŒºæ ‡è¯†ç¬¦, å¦‚ America/New_York
const timeZone = new Intl.DateTimeFormat().resolvedOptions().timeZone;
console.log("ç”¨æˆ·æ—¶åŒºåç§»ï¼š" + timeZone); // ç”¨æˆ·æ—¶åŒºåç§»ï¼šAsia/Shanghai

// è·å–æœ¬åœ°æ—¶é—´ä¸UTCæ—¶é—´åç§»å€¼,æœ€å°å•ä½æ˜¯åˆ†é’Ÿ. å¦‚"-480", è¡¨ç¤º-8å°æ—¶. å…¶ä¸­æ­£è´Ÿè¡¨ç¤ºUTCå‰å, å¦‚ç¾å›½ä¸œéƒ¨æ—¶é—´æ˜¯UTC-5, ä¸­å›½åŒ—äº¬æ—¶é—´æ˜¯UTC+8
const date = new Date();
const timeZoneOffset = date.getTimezoneOffset();
console.log("æ—¶åŒºåç§»ï¼š" + timeZoneOffset); // æ—¶åŒºåç§»ï¼š-480
```

Intlæ˜¯æ–°çš„æµè§ˆå™¨APIï¼Œä¸Mathç±»ä¼¼æ˜¯å…¨å±€é™æ€å¯¹è±¡ï¼Œä¸“é—¨ç”¨äºå¤„ç†å›½é™…åŒ–å’Œæœ¬åœ°åŒ–ä¸šåŠ¡ã€‚å…¶ä¸‹çš„DateTimeFormatå¯ä»¥å¤„ç†æ—¶é—´ç›¸å…³å›½é™…åŒ–é—®é¢˜ã€‚

## DST

DSTï¼ˆDaylight saving timeï¼‰ï¼Œæ—¥å…‰èŠ‚çº¦æ—¶ï¼Œå¤ä»¤æ—¶/å†¬ä»¤æ—¶ç­‰ç­‰åç§°ã€‚**å®ƒä¼šåœ¨æ¯å¹´æ˜¥å¤©çš„æŸä¸€å¤©å°†æ—¶é’Ÿå‘åæ‹¨ä¸€å°æ—¶ï¼Œåˆåœ¨ç§‹å¤©çš„æŸä¸€å¤©å°†æ—¶é’Ÿå‘å‰æ‹¨åŠ¨ä¸€ä¸ªå°æ—¶ã€‚**éå›½é™…åŒ–ä¸šåŠ¡å¾ˆå°‘é‡åˆ°è¿™ä¸ªæƒ…å†µï¼Œä¸»è¦å› ä¸º**ä¸­å›½ä¸å®è¡Œå¤ä»¤æ—¶/å†¬ä»¤æ—¶ã€‚**

- ä¸ºä»€ä¹ˆè¦å®è¡Œå¤ä»¤æ—¶ï¼Ÿä¸€æˆ˜æ—¶å¾·å›½ç‡å…ˆå®è¡Œï¼Œå°†æ¯å¹´å¤å¤©å¢åŠ 1hï¼Œå†¬å¤©å‡å°‘1h
- ä¼šäº§ç”Ÿä»€ä¹ˆç°è±¡ï¼Ÿå› ä¸ºæ˜¯è¡Œæ”¿çº¦å®šï¼Œæ¯å¹´éƒ½å¯ä»¥è‡ªç”±é€‰æ‹©æŸå¤©æŸæ—¶è¿›å…¥å¤ä»¤æ—¶ï¼Œå„å›½è‡ªç”±å‘å¸ƒã€‚[IANAä¼šå­˜å‚¨](https://www.iana.org/time-zones)åŒæ­¥å„å›½DSTï¼Œè®¡ç®—æœºæ¯å°æ—¶åŒæ­¥æ—¶é—´åä¼šåœ¨æŸä¸€ç§’å‘ç”Ÿ**çªå˜**ï¼Œæ¯”å¦‚1:59åˆ°2ç‚¹çš„æ—¶å€™çªå˜ä¼š1:00
- è®¡ç®—æœºå¦‚ä½•è¡¨ç¤ºæ—¶é—´ï¼Ÿè®¡ç®—æœºéƒ½æœ‰ä¸€ä¸ªunixTimeï¼Œå®ƒè¡¨ç¤ºå½“å‰æ—¶é—´è·ç¦»ä¸–ç•Œæ ‡å‡†æ—¶çš„1970å¹´1æœˆ1æ—¥0ç‚¹0åˆ†0ç§’çš„æ¯«ç§’æ•°ï¼Œæ˜¯ä¸€ä¸ªç»å¯¹å€¼ï¼Œä¹Ÿå°±æ˜¯UTCæ—¶é—´
- ä½†æ˜¯ä¸åŒåœ°åŒºè®¾å¤‡ä¼šæ ¹æ®æœ¬åœ°æœ‰ä¸€ä¸ªæ ¼å¼åŒ–ï¼Œå°†UTCæ—¶é—´è½¬åŒ–ä¸ºæœ¬åœ°æ—¶é—´ï¼Œæ¯”å¦‚ä¸­å›½åœ¨ä¸œå…«åŒº

```bash
2021-03-14 01:59:59 GMT-08:00ï¼ˆå¤ªå¹³æ´‹æ ‡å‡†æ—¶é—´ï¼ŒPSTï¼‰
2021-03-14T01:59:59.000-08:00ï¼ˆISOæ ¼å¼è¡¨ç¤ºï¼‰
2021-03-14T09:59:59.000Zï¼ˆè½¬æ¢ä¸ºUTCæ—¶é—´å¹¶ä»¥ISOæ ¼å¼è¡¨ç¤ºï¼‰

// ä¸‹ä¸€ç§’æ—¶é—´çªå˜
2021-03-14 03:00:00 GMT-07:00ï¼ˆå¤ªå¹³æ´‹å¤ä»¤æ—¶é—´ï¼ŒPDTï¼‰
2021-03-14T03:00:00.000-07:00ï¼ˆISOæ ¼å¼è¡¨ç¤ºï¼‰
2021-03-14T10:00:00.000Zï¼ˆè½¬æ¢ä¸ºUTCæ—¶é—´å¹¶ä»¥ISOæ ¼å¼è¡¨ç¤ºï¼‰
```


```JS
// åŸå§‹æ—¶é—´å­—ç¬¦ä¸²
const timeString = "2021-03-14T09:59:59.000Z";

// å°†æ—¶é—´å­—ç¬¦ä¸²è½¬æ¢ä¸º Date å¯¹è±¡
const date = new Date(timeString);
const pstOutput = date.toLocaleString("en-US", { timeZone: "America/Los_Angeles", hour12: false });
console.log(pstOutput); // 3/14/2021, 01:59:59

// è·å–æ—¶é—´æˆ³
const timestamp = date.getTime();

// å¢åŠ 1ç§’
const newTimestamp = timestamp + 1000;

// åˆ›å»ºæ–°çš„ Date å¯¹è±¡å¹¶æ ¼å¼åŒ–ä¸º PDT æ—¶é—´
const newDate = new Date(newTimestamp);
const pdtOutput = newDate.toLocaleString("en-US", { timeZone: "America/Los_Angeles", hour12: false });

console.log(pdtOutput); // 3/14/2021, 03:00:00
```

## æ—¶é—´å¤„ç†

### Dayjsæ’ä»¶

dayjs: [https://day.js.org/docs/zh-CN/i18n/i18n](https://day.js.org/docs/zh-CN/i18n/i18n)

å›½é™…åŒ–æ”¯æŒ [https://github.com/iamkun/dayjs/tree/dev/src/locale](https://github.com/iamkun/dayjs/tree/dev/src/locale)

åŸç†ï¼šé€šè¿‡æ‹‰å–å¤šè¯­è¨€æ–‡æ¡ˆè¾“å‡ºä¸åŒçš„formatedæ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²

å¯ä»¥çœ‹è¿™ä¸ªdemo: [Days of the week](https://codesandbox.io/s/dayjs-dynamic-locale0import-forked-wnk2zq?file=/src/index.js)


å› æˆ‘æœ¬åœ°ç³»ç»Ÿè®¾ç½®äº†æ¯å‘¨ç¬¬ä¸€å¤©ä¸ºæ˜ŸæœŸæ—¥

### Intl API

```jsx
const date = new Date();
const formattedDate = new Intl.DateTimeFormat('en-US').format(date);
console.log(formattedDate); // 10/29/2023
const formattedDate = new Intl.DateTimeFormat('zh-CN').format(date);
console.log(formattedDate); // 2023/10/29
```

### æœ¬åœ°æ—¶é—´è¾“å‡º
```JS
// åˆ›å»º DateTimeFormat å¯¹è±¡ï¼Œå¹¶æŒ‡å®šè¯­è¨€å’Œåœ°åŒº
const dateFormatterCN = new Intl.DateTimeFormat('zh-CN', {
  year: 'numeric',
  month: 'long', // ä½¿ç”¨å®Œæ•´çš„æœˆä»½åç§°
  day: 'numeric',
});
console.log(dateFormatterCN.format(new Date('2024-04-28'))); // 2024å¹´4æœˆ28æ—¥

const dateFormatterUS = new Intl.DateTimeFormat('en-US', {
  year: 'numeric',
  month: 'long', // ä½¿ç”¨å®Œæ•´çš„æœˆä»½åç§°
  day: 'numeric',
});
console.log(dateFormatterUS.format(new Date('2024-04-28'))); // April 28, 2024
```

## Intl.RelativeTimeFormat ç›¸å¯¹æ—¶é—´

**`Intl.RelativeTimeFormat`** æ˜¯ JavaScript ä¸­çš„å›½é™…åŒ– APIï¼Œç”¨äºæ ¼å¼åŒ–ç›¸å¯¹æ—¶é—´ï¼Œä¾‹å¦‚â€œ1 å°æ—¶å‰â€æˆ–â€œ2 å¤©åâ€ã€‚è¿™ä¸ª API å¯ä»¥æ ¹æ®ä¸åŒçš„è¯­è¨€å’Œåœ°åŒºè®¾ç½®ï¼Œä»¥è‡ªç„¶è¯­è¨€çš„æ–¹å¼å‘ˆç°ç›¸å¯¹æ—¶é—´ï¼Œä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”å¤šè¯­è¨€ç¯å¢ƒã€‚

```jsx
const rtf1 = new Intl.RelativeTimeFormat('zh', { style: 'short' });

console.log(rtf1.format(3, 'quarter'));
// Expected output: "3ä¸ªå­£åº¦å"

console.log(rtf1.format(-1, 'day'));
// Expected output: "1å¤©å‰"

const rtf2 = new Intl.RelativeTimeFormat('jp', { numeric: 'auto' });

console.log(rtf2.format(2, 'day'));
// Expected output: "åå¤©"
```

æˆ‘ä»¬çŸ¥é“ä¸­æ–‡è¯­å¢ƒæ˜¯ä»¥ä¸‡ä»¥ä¸Šå¯ä»¥ç¼©å†™ä¸º1ä¸‡ï¼Œæˆ–è€…æ˜¯ 1 0000ã€‚ä¹Ÿå°±æ˜¯4ä½æ•°å­—ã€‚æ¯”å¦‚ 1 2345 6789æˆ–è€…1â€™2345â€™6789ï¼ˆâ€™æ˜¯ä¸‡ä½åˆ†éš”ç¬¦ï¼‰å¯ä»¥ä¸€çœ¼çœ‹å‡ºæ¥æ˜¯ä¸€äº¿ä¸¤åƒä¸‰ç™¾å››åäº”ä¸‡å…­åƒä¸ƒç™¾å…«åä¹ã€‚è€Œå¦‚æœæ˜¯123, 456, 789å¯èƒ½å¾ˆå¤šäººä¼šæ„£å¾ˆä¹…é‡æ–°æ•°æ‰çŸ¥é“æ˜¯å¤šå°‘ã€‚ä½†æ˜¯ç°åœ¨å¾ˆå¤šé“¶è¡ŒAPPéƒ½åœ¨æ¨è·Ÿæ¬§ç¾ä¸€æ ·çš„å±äºåè€…çš„åƒä½åˆ†éš”ç¬¦ã€‚å¯ä»¥çœ‹è¿™ç¯‡è®¨è®ºè§‰å¾—å†™çš„åœ¨ç†ã€‚


[è®¾è®¡äº§å“æ—¶ï¼Œä½ æ˜¯å¦‚ä½•æ‰å…¥ä»ä¼—çš„é™·é˜±ä¸­çš„ï¼Ÿ â€“ äººäººéƒ½æ˜¯äº§å“ç»ç†](https://www.woshipm.com/pd/1500589.html)

ç±»ä¼¼ä»¥ä¸Šä¾‹å­å¯ä»¥å†çœ‹ä¸‹é¢çš„ä¸¾ä¾‹ï¼Œå¯ä»¥å‘ç°åœ¨å¾·è¯­å’Œæ³•è¯­ä¸‹ï¼Œåƒåˆ†ä½åˆ†éš”ç¬¦åˆ†åˆ«æ˜¯`. `å’Œ` `

```jsx
const number = 1234567.89;
const formattedNumber = new Intl.NumberFormat('zh-CN').format(number);
console.log(formattedNumber); // 1,234,567.89

const number = 1234567.89;
const formattedNumber = new Intl.NumberFormat('en-US').format(number);
console.log(formattedNumber); // 1,234,567.89

const number = 1234567.89;
const formattedNumber = new Intl.NumberFormat('de-DE').format(number);
console.log(formattedNumber); // 1.234.567,89

const number = 1234567.89;
const formattedNumber = new Intl.NumberFormat('fr-FR').format(number);
console.log(formattedNumber); // 1 234 567,89
```

## å•å¤æ•°

è‹±æ–‡å¤æ•°æ˜¯è¦åŠ sçš„ï¼Œæ¯”å¦‚apples

```jsx
const numbers = [1, 2, 5, 10, 100];
for (const number of numbers) {
  const pluralRules = new Intl.PluralRules('en-US'); // ä½¿ç”¨è‹±è¯­ç¯å¢ƒ
  const pluralForm = pluralRules.select(number);

  console.log(`In English, ${number} item${pluralForm !== 'one' ? 's' : ''}.`);
}
// In English, 1 item.
// In English, 2 items.
// In English, 5 items.
// In English, 10 items.
// In English, 100 items.
```

åœ¨æ¯”å¦‚é¡ºåºï¼Œç¬¬ä¸€ç¬¬äºŒç¬¬ä¸‰ï¼Œè‹±æ–‡åˆ†åˆ«ä¸ºfirst, second, third, fourth, fifth. èªæ˜çš„ä½ ä¸€å®šå‘ç°è§„å¾‹äº†ã€‚é™¤äº†123åé¢å°±æ˜¯æ•°å­—+thã€‚ç®€å†™æ˜¯1st, 2ndã€‚æ ¹æ®ä¸‹è¡¨å¯ä»¥å‘ç°è§„å¾‹ï¼š

1. 1 â†’ stï¼Œåé¢é™¤äº†11å¤–ï¼Œ21-91éƒ½æ˜¯21st, 91stè¿™ç§
2. 2 â†’ ndï¼Œåé¢é™¤äº†12å¤–ï¼Œ22-92éƒ½æ˜¯22nd, 92ndè¿™ç§
3. 3 â†’ rdï¼Œåé¢é™¤äº†13å¤–ï¼Œ23-93éƒ½æ˜¯23rd, 93rdè¿™ç§
4. å…¶ä»–éƒ½æ˜¯è¡¥th


| æ•°å­— | è‹±æ–‡ | ç¬¬N |
| --- | --- | --- |
| 1 | One | 1st |
| 2 | Two | 2nd |
| 3 | Three | 3rd |
| 4 | Four | 4th |
| 10 | Ten | 10th |
| 11 | Eleven | 11th |
| 12 | Twelve | 12th |
| 13 | Thirteen | 13th |
| 20 | Twenty | 20th |
| 21 | Twenty-one | 21st |
| 30 | Thirty | 22nd |
| 31 | Thirty-one | 21st |
| 100 | One hundred | 100th |

åŒæ ·å¯ä»¥ç”¨ä»£ç å®ç°å¦‚ä¸Šè§„å¾‹

```jsx
const enOrdinalRules = new Intl.PluralRules("en-US", { type: "ordinal" });

const suffixes = new Map([
  ["one", "st"],
  ["two", "nd"],
  ["few", "rd"],
  ["other", "th"],
]);
const formatOrdinals = (n) => {
  const rule = enOrdinalRules.select(n);
  const suffix = suffixes.get(rule);
  return `${n}${suffix}`;
};

formatOrdinals(0); // '0th'
formatOrdinals(1); // '1st'
formatOrdinals(2); // '2nd'
formatOrdinals(3); // '3rd'
formatOrdinals(4); // '4th'
formatOrdinals(11); // '11th'
formatOrdinals(21); // '21st'
formatOrdinals(42); // '42nd'
formatOrdinals(103); // '103rd'
```

# æ•°å­—æ ¼å¼åŒ–

## æ•´æ•°åˆ†éš”å’Œå°æ•°åˆ†éš”

å¸¸è§çš„æ•´æ•°åˆ†éš”ç¬¦å·æœ‰åƒåˆ†ä½åˆ†éš”ï¼Œæ¯”å¦‚ `1000,000`ï¼Œä¹Ÿæœ‰ä¸‡ä½åˆ†éš”æ¯”å¦‚ `1000 0000`ã€‚ä¸åŒè¯­è¨€ä¸ä¸€æ ·ã€‚

å¸¸è§çš„å°æ•°åˆ†éš”ç¬¦å·æ˜¯`.`ï¼Œæ¯”å¦‚ `1000.00`ã€‚ä¸åŒè¯­è¨€ä¹Ÿä¸ä¸€æ ·ã€‚

```jsx
const number = 1234567.89;
// æ ¼å¼åŒ–ä¸ºé»˜è®¤æ•°å­—æ ¼å¼
const formattedNumber = new Intl.NumberFormat().format(number);
console.log(formattedNumber); // è¾“å‡º: 1,234,567.89
// æ ¼å¼åŒ–ä¸ºæŒ‡å®šè¯­è¨€ç¯å¢ƒçš„æ•°å­—æ ¼å¼
const formattedNumberDE = new Intl.NumberFormat('de-DE').format(number);
console.log(formattedNumberDE); // è¾“å‡º: 1.234.567,89
// æ ¼å¼åŒ–ä¸ºæŒ‡å®šè¯­è¨€ç¯å¢ƒçš„æ•°å­—æ ¼å¼
const formattedNumberFR = new Intl.NumberFormat('fr-FR').format(number);
console.log(formattedNumberFR); // è¾“å‡º: 1â€¯234â€¯567,89
const formattedNumberCN = new Intl.NumberFormat('zh-CN').format(number);
console.log(formattedNumberCN)  // è¾“å‡º: 1,234,567.89
```

ä¹Ÿå¯ä»¥é€šè¿‡å‚æ•°é…ç½®æ§åˆ¶å°æ•°éƒ¨åˆ†æœ€å¤šæˆ–è€…æœ€å°‘æœ‰å¤šå°‘ä½

```jsx
const number = 1234567.89123;
const formattedNumber = new Intl.NumberFormat('en-US', {
  style: 'decimal', // å¯é€‰ 'decimal' è¡¨ç¤ºå¸¸è§„æ•°å­—æ ¼å¼
  maximumFractionDigits: 3, // å°æ•°éƒ¨åˆ†æœ€å¤šæ˜¾ç¤ºä¸‰ä½
}).format(number);
console.log(formattedNumber); // è¾“å‡º: 1,234,567.891
```

## ç™¾åˆ†æ¯”
æ­£å¸¸ç™¾åˆ†æ¯”æ˜¯0-100æ•°å­—+%ï¼Œä½†æ˜¯æ³•è¯­ç¯å¢ƒç™¾åˆ†æ¯”ç¬¦å·ä¹ æƒ¯æ˜¯ '% 'è€Œä¸æ˜¯'%'ï¼Œå¤šäº†ä¸€ä¸ªç©ºæ ¼ã€‚

```jsx
const percentage = 0.75;
// ä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒ
const formattedPercentageDefault = new Intl.NumberFormat('fr-FR', {
  style: 'percent'
}).format(percentage);
console.log(formattedPercentageDefault); // è¾“å‡º: '75 %'
// ä½¿ç”¨æŒ‡å®šè¯­è¨€ç¯å¢ƒ
const formattedPercentageFR = new Intl.NumberFormat('fr-FR', {
  style: 'percent',
  minimumFractionDigits: 2,
  maximumFractionDigits: 2,
}).format(percentage);
console.log(formattedPercentageFR); // è¾“å‡º: '75,00 %'
// ä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒ
const formattedPercentageUS = new Intl.NumberFormat('en-US', {
  style: 'percent'
}).format(percentage);
console.log(formattedPercentageUS); // è¾“å‡º: '75%'
// ä½¿ç”¨æŒ‡å®šè¯­è¨€ç¯å¢ƒ
const formattedPercentageCN = new Intl.NumberFormat('zh-CN', {
  style: 'percent',
  minimumFractionDigits: 2,
  maximumFractionDigits: 2,
}).format(percentage);
console.log(formattedPercentageCN); // è¾“å‡º: '75.00%'
```

### ç¼©å†™

```JS
console.log(new Intl.NumberFormat('en-US', { notation: "compact" , compactDisplay: "short", maximumFractionDigits: 2 }).format(987654321)) // 987.65M
console.log(new Intl.NumberFormat('zh-CN', { notation: "compact" , compactDisplay: "short", maximumFractionDigits: 2 }).format(987654321)) // 9.88äº¿
```

# è´§å¸

## è´§å¸ç¬¦å·

æ¯”å¦‚äººæ°‘å¸æ˜¯ `Â¥`ï¼Œç¾å…ƒæ˜¯ `$`ï¼Œæ¬§å…ƒ `â‚¬`ï¼Œè‹±é•‘ `Â£`

```jsx
new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).formatToParts().filter(i => i.type === 'currency')[0].value // '$'
new Intl.NumberFormat('zh-CN', { style: 'currency', currency: 'CNY' }).formatToParts().filter(i => i.type === 'currency')[0].value // 'Â¥'
new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).formatToParts().filter(i => i.type === 'currency')[0].value // 'â‚¬'
```

## è´§å¸æ ¼å¼åŒ–

ç”¨å¸¸è§çš„å‡ ä¸ªç»æµä½“å’Œèº«è¾¹ç”¨çš„å¤šçš„caseä¸¾ä¾‹è¯´æ˜ï¼Œæ³¨æ„çœ‹è¾“å‡ºå†…å®¹

```jsx
// ç¾å…ƒ $æ˜¯ç¾å…ƒç¬¦å·
const numberUSD = 123456789.12;
const formattedNumberUSD = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(numberUSD);
console.log(formattedNumberUSD); // $123,456,789.12

// äººæ°‘å¸ Â¥æ˜¯äººæ°‘å¸ç¬¦å·
const numberCNY = 123456789.12;
const formattedNumberCNY = new Intl.NumberFormat('zh-CN', { style: 'currency', currency: 'CNY' }).format(numberCNY);
console.log(formattedNumberCNY); // Â¥123,456,789.12

// æ¬§å…ƒ â‚¬æ˜¯æ¬§å…ƒç¬¦å·
const numberEUR = 123456789.12;
const formattedNumberEUR = new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(numberEUR);
console.log(formattedNumberEUR); // 123.456.789,12Â â‚¬

// æ—¥å…ƒ
const numberJPY = 123456789.12;
const formattedNumberJPY = new Intl.NumberFormat('ja-JP', { style: 'currency', currency: 'JPY' }).format(numberJPY);
console.log(formattedNumberJPY); // Â¥123,456,789

// è‹±é•‘ Â£æ˜¯è‹±é•‘ç¬¦å·
const numberGBP = 123456789.12;
const formattedNumberGBP = new Intl.NumberFormat('en-GB', { style: 'currency', currency: 'GBP' }).format(numberGBP);
console.log(formattedNumberGBP); // Â£123,456,789.12

// æ¸¯å¸
const numberHKD = 123456789.12;
const formattedNumberHKD = new Intl.NumberFormat('zh-HK', { style: 'currency', currency: 'HKD' }).format(numberHKD);
console.log(formattedNumberHKD); // HK$123,456,789.12

// éŸ©å…ƒ
const numberKRW = 123456789.12;
const formattedNumberKRW = new Intl.NumberFormat('ko-KR', { style: 'currency', currency: 'KRW' }).format(numberKRW);
console.log(formattedNumberKRW); // â‚©123,456,789.12
```

è´§å¸çš„å…¼å®¹æ€§å…œåº•å¯ä»¥ç”¨ `Number.prototype.toLocaleString` å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨formatjsæä¾›çš„polyfillã€‚

```jsx
// ç¾å…ƒ $æ˜¯ç¾å…ƒç¬¦å·
const numberUSD = 123456789.12;
const formattedNumberUSD = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(numberUSD);
const formatttdNumberUSDByLocaleString = Number(numberUSD).toLocaleString('en-US', { style: 'currency', currency: 'USD' });
console.log(formattedNumberUSD); // $123,456,789.12
console.log(numberUSD.toLocaleString()) // 123,456,789.12
console.log(formatttdNumberUSDByLocaleString) // $123,456,789.12
```

## è´§å¸å•ä½æ˜¾ç¤º

æ¯”å¦‚ç¾å›½æ˜¯ç¾å…ƒï¼Œä¸­å›½æœ‰äººæ°‘å¸ã€‚å¯ä»¥ç›´æ¥æ ¼å¼åŒ–å‡ºæ¥ã€‚

```jsx
currencyNames = new Intl.DisplayNames(["zh-Hans"], { type: "currency" });
console.log(currencyNames.of("USD")); // "ç¾å…ƒ"
console.log(currencyNames.of("EUR")); // "æ¬§å…ƒ"
console.log(currencyNames.of("TWD")); // "æ–°å°å¸"
console.log(currencyNames.of("CNY")); // "äººæ°‘å¸"

currencyNames = new Intl.DisplayNames(["zh-Hant"], { type: "currency" });
console.log(currencyNames.of("USD")); // "ç¾å…ƒ"
console.log(currencyNames.of("EUR")); // "æ­å…ƒ"
console.log(currencyNames.of("TWD")); // "æ–°å°å¹£"
console.log(currencyNames.of("CNY")); // "äººæ°‘å¹£"
```

# æ’åº&åˆ—è¡¨

## Intl.Collator

å¸¸è§çš„ç”µè¯æœ¬ï¼Œåœ°å€ç°¿æ’åºã€‚ä¸åŒè¯­è¨€å› ä¸ºå­—æ¯è½¬æ¢åæ’åºä¸ä¸€è‡´ã€‚

**`Intl.Collator`** æ˜¯ JavaScript çš„å›½é™…åŒ– API ä¹‹ä¸€ï¼Œç”¨äºå­—ç¬¦ä¸²æ¯”è¾ƒå’Œæ’åºï¼Œä»¥ä¾¿åœ¨å¤šè¯­è¨€ç¯å¢ƒä¸­æ‰§è¡Œæ­£ç¡®çš„æ’åºæ“ä½œã€‚å®ƒå…è®¸ä½ åˆ›å»ºä¸€ä¸ª **`Collator`** å¯¹è±¡ï¼Œç”¨äºæ ¹æ®ç‰¹å®šè¯­è¨€å’ŒåŒºåŸŸè®¾ç½®æ‰§è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒå’Œæ’åºï¼Œè€ƒè™‘åˆ°ä¸åŒè¯­è¨€çš„å·®å¼‚ã€‚

```jsx
console.log(['Z', 'a', 'z', 'Ã¤'].sort(new Intl.Collator('de').compare));
// Expected output: Array ["a", "Ã¤", "z", "Z"]
console.log(['Z', 'a', 'z', 'Ã¤'].sort(new Intl.Collator('sv').compare));
// Expected output: Array ["a", "z", "Z", "Ã¤"]
console.log(['Z', 'a', 'z', 'Ã¤'].sort(new Intl.Collator('de', { caseFirst: 'upper' }).compare));
// Expected output: Array ["a", "Ã¤", "Z", "z"]

//åˆ›å»ºä¸€ä¸ªIntl.Collatorå¯¹è±¡
const collator = new Intl.Collator('en-US', { sensitivity: 'base', usage: 'sort' });

// å¯ä»¥çœ‹å‡ºä»¥ä¸‹è¾“å‡ºæ˜¯æŒ‰ç…§æ‹¼éŸ³æ’åº, guang jin mei ming tian yang
console.log(['ä»Š','å¤©','é˜³','å…‰', 'æ˜', 'åªš'].sort(new Intl.Collator('zh').compare)); // ['å…‰', 'ä»Š', 'åªš', 'æ˜', 'å¤©', 'é˜³']
```

å¯ä»¥å‘ç° optionså¯ä»¥ä¼ é€’å‚æ•°usageå’Œsensitivity, æœ‰å¦‚ä¸‹å–å€¼

1. **æ’åºæ–¹å¼ (usage)**: **`usage`** é€‰é¡¹æŒ‡å®šæ’åºçš„ç›®çš„
    - **`'sort'`**ï¼šç”¨äºæ’åºã€‚
    - **`'search'`**ï¼šç”¨äºæœç´¢æ“ä½œï¼Œé€šå¸¸ä¸åŒºåˆ†å¤§å°å†™ã€‚
2. **æ•æ„Ÿæ€§ (sensitivity)**: **`sensitivity`** é€‰é¡¹æŒ‡å®šå­—ç¬¦ä¸²æ¯”è¾ƒçš„æ•æ„Ÿæ€§çº§åˆ«
    - **`'base'`**ï¼šåŸºæœ¬æ•æ„Ÿæ€§ï¼Œä¸åŒºåˆ†é‡éŸ³ç¬¦å·ã€‚
    - **`'accent'`**ï¼šè€ƒè™‘é‡éŸ³ç¬¦å·ï¼Œä½†ä¸åŒºåˆ†å¤§å°å†™ã€‚
    - **`'case'`**ï¼šåŒºåˆ†å¤§å°å†™ï¼ŒåŒæ—¶è€ƒè™‘é‡éŸ³ç¬¦å·ã€‚
    - **`'case'`**ï¼šåŒºåˆ†å¤§å°å†™ï¼Œä½†ä¸è€ƒè™‘é‡éŸ³ç¬¦å·ã€‚
3. å¤§å°å†™ (caseFirst)
    - **`"upper"`**ï¼šè¡¨ç¤ºå¤§å†™å­—æ¯ï¼ˆuppercaseï¼‰åœ¨æ’åºä¸­ä¼˜å…ˆè€ƒè™‘ã€‚è¿™æ„å‘³ç€æ’åºä¼šå…ˆè€ƒè™‘æ‰€æœ‰å¤§å†™å­—æ¯ï¼Œç„¶åå†è€ƒè™‘å°å†™å­—æ¯ã€‚åœ¨ **`caseFirst: "upper"`** æƒ…å†µä¸‹ï¼Œå¤§å†™å­—æ¯ä¼šæ’åœ¨å°å†™å­—æ¯ä¹‹å‰ã€‚
    - **`"lower"`**ï¼šè¡¨ç¤ºå°å†™å­—æ¯ï¼ˆlowercaseï¼‰åœ¨æ’åºä¸­ä¼˜å…ˆè€ƒè™‘ã€‚è¿™æ„å‘³ç€æ’åºä¼šå…ˆè€ƒè™‘æ‰€æœ‰å°å†™å­—æ¯ï¼Œç„¶åå†è€ƒè™‘å¤§å†™å­—æ¯ã€‚åœ¨ **`caseFirst: "lower"`** æƒ…å†µä¸‹ï¼Œå°å†™å­—æ¯ä¼šæ’åœ¨å¤§å†™å­—æ¯ä¹‹å‰ã€‚
    - **`"false"`**ï¼šè¡¨ç¤ºä¸æŒ‡å®šå¤§å†™å­—æ¯å’Œå°å†™å­—æ¯çš„æ’åºé¡ºåºï¼Œå®ƒä»¬ä¼šä¸€èµ·æ’åºï¼Œä¸åŒºåˆ†å¤§å°å†™ã€‚
4. ignorePunctuation: boolean, è¡¨ç¤ºæ˜¯å¦å¿½ç•¥æ ‡ç‚¹ç¬¦å·

æœ‰å¦‚ä¸‹çš„åº”ç”¨æ–¹å¼

### å­—ç¬¦ä¸²æ¯”è¾ƒ

```jsx
const collator = new Intl.Collator('en-US', { sensitivity: 'base', usage: 'sort' }); //åˆ›å»ºä¸€ä¸ªIntl.Collatorå¯¹è±¡
const result = collator.compare('apple', 'Banana');
console.log(result); // æ ¹æ®é…ç½®è¾“å‡º -1ï¼ˆapple åœ¨ Banana å‰é¢ï¼‰
```

### æ•°ç»„æ’åº

æˆ‘ä»¬çŸ¥é“è‹±æ–‡å­—æ¯é»˜è®¤æŒ‰ç…§ASCIIæ’åºï¼Œè€Œå¦‚æœéœ€è¦AaBbè¿™æ ·æ’åºåªèƒ½è‡ªå·±å†™æ’åºå›è°ƒ

```jsx

// åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰Collatorå¯¹è±¡
const customCollator = new Intl.Collator('en-US', {
  sensitivity: 'base',
  usage: 'sort',
  ignorePunctuation: true,
  caseFirst: 'false',
});
// è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°, å¿½ç•¥ç©ºæ ¼å¹¶ä¸åŒºåˆ†å¤§å°å†™
function customCompare(a, b) {
  // ç§»é™¤å­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼å¹¶è½¬ä¸ºå°å†™åå†æ¯”è¾ƒ
  const stringA = a.replace(/\\s/g, '').toLowerCase();
  const stringB = b.replace(/\\s/g, '').toLowerCase();
  if (stringA < stringB) {
    return -1;
  }
  if (stringA > stringB) {
    return 1;
  }
  return 0;
}
const data = ['Apple', 'banana', 'cherry', 'apple pie', 'Banana Split', 'cherry tart'];
const data2 = data.slice()
// è€æ–¹å¼: ä½¿ç”¨sortå›è°ƒæ’åº
console.log(data.sort(customCompare)); // è¾“å‡ºæ’åºç»“æœï¼š['Apple', 'apple pie', 'banana', 'Banana Split', 'cherry', 'cherry tart']
// æ–°æ–¹å¼: ä½¿ç”¨è‡ªå®šä¹‰Collatorå¯¹è±¡è¿›è¡Œæ’åº
console.log(data2.sort(customCollator.compare)); // è¾“å‡ºæ’åºç»“æœï¼š['Apple', 'apple pie', 'banana', 'Banana Split', 'cherry', 'cherry tart']
```

å¯ä»¥å‘ç°ä¸¤ç§æ–¹å¼ç»“æœä¸€æ ·ï¼Œä½†æ˜¯æ˜æ˜¾Intl. Collatoræ›´åŠ ä¼˜é›…ï¼Œæ˜¯é…ç½®åŒ–çš„ã€‚

## Intl.ListFormat

**`Intl.ListFormat`** æ˜¯ JavaScript çš„å›½é™…åŒ– API ä¹‹ä¸€ï¼Œå®ƒç”¨äºæ ¼å¼åŒ–åˆ—è¡¨ï¼Œä»¥ä¾¿åœ¨å¤šè¯­è¨€ç¯å¢ƒä¸­åˆ›å»ºè‡ªç„¶è¯­è¨€çš„åˆ—è¡¨è¡¨ç¤ºã€‚**`Intl.ListFormat`** å…è®¸ä½ æŒ‡å®šåˆ—è¡¨é¡¹çš„è¿æ¥æ–¹å¼ï¼ˆå¦‚é€—å·ã€"å’Œ" ç­‰ï¼‰ï¼Œä»¥åŠåˆ—è¡¨é¡¹çš„æ ·å¼å’Œè¯­è¨€è®¾ç½®ã€‚

```jsx
const listFormatter = new Intl.ListFormat('en-US', { style: 'long', type: 'disjunction' });
const items = ['apples', 'bananas', 'cherries'];
const formattedList = listFormatter.format(items);
console.log(formattedList); // æ ¹æ®é…ç½®è¾“å‡ºä¾‹å¦‚ï¼š"apples, bananas, or cherries"

const listFormatter = new Intl.ListFormat('en-US', { style: 'short', type: 'conjunction' });
const items = ['apples', 'bananas', 'cherries'];
const formattedList = listFormatter.format(items);
console.log(formattedList); // æ ¹æ®é…ç½®è¾“å‡ºä¾‹å¦‚ï¼š"apples, bananas, & cherries"

const listFormatter = new Intl.ListFormat('en-US', { style: 'narrow', type: 'conjunction' });
const items = ['apples', 'bananas', 'cherries'];
const formattedList = listFormatter.format(items);
console.log(formattedList); // æ ¹æ®é…ç½®è¾“å‡ºä¾‹å¦‚ï¼š"apples, bananas, cherries"
```

å¯ä»¥å‘ç° optionså¯ä»¥ä¼ é€’å‚æ•°styleå’Œtype, æœ‰å¦‚ä¸‹å–å€¼

1. **æ ·å¼ (style)**: **`style`** é€‰é¡¹æŒ‡å®šåˆ—è¡¨çš„æ ·å¼ï¼Œæœ‰ä¸‰ä¸ªå¯èƒ½çš„å€¼
   - **`'long'`**ï¼šä½¿ç”¨å®Œæ•´çš„è¯­è¨€è¡¨è¾¾ï¼Œä¾‹å¦‚ "A, B, and C"ã€‚
   - **`'short'`**ï¼šä½¿ç”¨ç¼©ç•¥å½¢å¼ï¼Œä¾‹å¦‚ "A, B, & C"ã€‚
   - **`'narrow'`**ï¼šä½¿ç”¨æç®€çš„å½¢å¼ï¼Œä¾‹å¦‚ "A B C"ã€‚
2. **è¿æ¥æ–¹å¼ (type)**: **`type`** é€‰é¡¹æŒ‡å®šè¿æ¥åˆ—è¡¨é¡¹çš„æ–¹å¼ï¼Œæœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼
   - **`'conjunction'`**ï¼šä½¿ç”¨ "å’Œ"ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œä¾‹å¦‚ "Aã€Bå’ŒC"ã€‚
   - **`'disjunction'`**ï¼šä½¿ç”¨ "æˆ–"ï¼Œä¾‹å¦‚ "Aã€Bæˆ–C"ã€‚

# æ—¥å†

æ—¥å†æ˜¯ä¸€ç§å¸¸è§çš„ä¸œè¥¿ï¼Œåœ¨ä¸­å›½æˆ‘ä»¬ç»å¸¸æ¥è§¦åˆ°å…¬å†å’Œå†œå†ã€‚å…¬å†å…¨ç§°æ ¼é‡Œé«˜åˆ©å†ï¼Œè‹±æ–‡gregoryã€‚

ç°åœ¨å›½å®¶èŠ‚æ—¥å¾ˆå¤šéƒ½æ˜¯è·Ÿéšå†œå†çš„ï¼Œæ¯”å¦‚æ˜¥èŠ‚ã€ä¸­ç§‹èŠ‚ç­‰ã€‚ä»¥å‰å®¶å®¶äººæ‰‹ä¸€æœ¬å†œå†ï¼Œä¸Šé¢ä¼šå†™ç€ä»Šå¤©é€‚å®œåšä»€ä¹ˆï¼Œæ¯”å¦‚å‡ºè¡Œã€åŠ¨åœŸç­‰ã€‚ä¸œå—äºšå’ŒéŸ©å›½ä¹Ÿæœ‰å¯¹åº”çš„æ—¥å†æœ¬ï¼Œæ ·å­è¿˜ä¸å¤ªä¸€æ ·ã€‚

è€Œä¸æ­¤ç›¸åŒï¼Œæ¯ä¸ªåœ°æ–¹éƒ½æœ‰è‡ªå·±çš„å†æ³•ï¼š

1. **ä¼Šæ–¯å…°å†ï¼ˆHijri Calendarï¼‰**ï¼šä¹Ÿç§°ä¸ºä¼Šæ–¯å…°å†œå†ï¼Œæ˜¯ä¼Šæ–¯å…°æ•™çš„å®˜æ–¹æ—¥å†ï¼ŒåŸºäºæœˆäº®çš„å¾ªç¯ã€‚ä¼Šæ–¯å…°å†çš„å¹´ä»½æ¯”å…¬å†å¹´ä»½çŸ­ï¼Œæ¯å¹´æœ‰12ä¸ªæœˆï¼Œå› æ­¤å­£èŠ‚æ—¥æœŸä¼šå˜åŒ–ã€‚
2. **å¸Œä¼¯æ¥å†ï¼ˆHebrew Calendarï¼‰**ï¼šå¸Œä¼¯æ¥å†æ˜¯çŠ¹å¤ªæ•™çš„å®˜æ–¹æ—¥å†ï¼ŒåŸºäºå¤ªé˜³å’Œæœˆäº®çš„å‘¨æœŸã€‚å®ƒæœ‰13ä¸ªæœˆï¼Œå…¶ä¸­ä¸€äº›æœˆä»½å¯ä»¥æœ‰ä¸åŒçš„å¤©æ•°ï¼Œä»¥ä¿æŒä¸å†œå†å­£èŠ‚çš„ä¸€è‡´æ€§ã€‚
3. **å†œå†ï¼ˆLunar Calendarï¼‰**ï¼šå†œå†åŸºäºæœˆäº®çš„å¾ªç¯ï¼Œä¸åŒåœ°åŒºå’Œæ–‡åŒ–æœ‰ä¸åŒçš„å†œå†ç³»ç»Ÿï¼Œå¦‚ä¸­å›½å†œå†ã€éŸ©å›½å†œå†ã€è¶Šå—å†œå†ç­‰ã€‚
4. **æ³¢æ–¯å†ï¼ˆPersian Calendarï¼‰**ï¼šæ³¢æ–¯å†ï¼Œä¹Ÿç§°æ³¢æ–¯å¤ªé˜³å†ï¼Œæ˜¯ä¼Šæœ—å’Œä¸€äº›é‚»è¿‘å›½å®¶ä½¿ç”¨çš„å¤ªé˜³å†ï¼Œä¸å…¬å†æœ‰ä¸€äº›å·®å¼‚ã€‚
5. **å°åº¦å†æ³•ï¼ˆIndian Calendarï¼‰**ï¼šå°åº¦æœ‰å¤šç§å†æ³•ï¼ŒåŒ…æ‹¬ç»´åŸºå†ï¼ˆVikram Samvatï¼‰ã€å›½æ°‘å†æ³•ï¼ˆSaka Samvatï¼‰ã€æ³°ç±³å°”å†æ³•ï¼ˆTamil Calendarï¼‰ç­‰ã€‚
6. **å·´å“ˆä¼Šå†ï¼ˆBahÃ¡'Ã­ Calendarï¼‰**ï¼šå·´å“ˆä¼Šä¿¡ä»°ä½¿ç”¨çš„ç‹¬ç‰¹æ—¥å†ï¼ŒåŒ…æ‹¬19ä¸ªæœˆï¼Œæ¯ä¸ªæœˆ19å¤©ã€‚
7. **æ°‘æ—å†æ³•**ï¼šä¸€äº›æ–‡åŒ–å’Œæ°‘æ—æ‹¥æœ‰è‡ªå·±çš„ç‹¬ç‰¹å†æ³•ï¼Œç”¨äºçºªå¿µç‰¹å®šå†å²äº‹ä»¶å’ŒèŠ‚æ—¥ã€‚


```jsx
const date = new Date(); // å½“å‰æ—¥æœŸ, Mon Oct 30 2023 20:00:50 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)
const formattedDate = new Intl.DateTimeFormat('ar-SA-u-ca-islamic', { year: 'numeric', month: 'long', day: 'numeric' }).format(date);
console.log(formattedDate); // Ù¡Ù¦ Ø±Ø¨ÙŠØ¹ Ø§Ù„Ø¢Ø®Ø± Ù¡Ù¤Ù¤Ù¥ Ù‡Ù€

const date = new Date(1994, 1, 26);
const formattedDate = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', { year: 'numeric', month: 'long', day: 'numeric' }).format(date);
console.log(formattedDate); // 1994ç”²æˆŒå¹´æ­£æœˆ17

// ä¸åŒè¯­è¨€ä¸‹ä¸åŒæ—¥å†çš„åç§°
const calendarNames = new Intl.DisplayNames('en-US', { type: 'calendar' });
console.log(calendarNames.of('gregory')); // è¾“å‡ºï¼šGregorian
console.log(calendarNames.of('islamic')); // è¾“å‡ºï¼šIslamic

const calendarNames = new Intl.DisplayNames('zh-CN', { type: 'calendar' });
console.log(calendarNames.of('gregory')); // è¾“å‡ºï¼šå…¬å†
console.log(calendarNames.of('islamic')); // è¾“å‡ºï¼šä¼Šæ–¯å…°å†
```

é™¤äº†ä¸Šè¿°gregoryæ ¼é‡Œé«˜åˆ©å†, å–å€¼è¿˜æœ‰ä¸‹é¢è¿™äº›

1.  **"buddhist"**ï¼šä½›æ•™å†ï¼ˆBuddhist Calendarï¼‰
2.  **"chinese"**ï¼šä¸­å›½å†œå†ï¼ˆChinese Lunar Calendarï¼‰
3.  **"coptic"**ï¼šç§‘æ™®ç‰¹å†ï¼ˆCoptic Calendarï¼‰
4.  **"ethiopic"**ï¼šåŸƒå¡ä¿„æ¯”äºšå†ï¼ˆEthiopic Calendarï¼‰
5.  **"gregory"**ï¼šæ ¼é‡Œé«˜åˆ©å†ï¼ˆGregorian Calendarï¼Œå³å…¬å†ï¼‰
6.  **"hebrew"**ï¼šå¸Œä¼¯æ¥å†ï¼ˆHebrew Calendarï¼‰
7.  **"indian"**ï¼šå°åº¦å†æ³•ï¼ˆIndian Calendarï¼‰ï¼ŒåŒ…æ‹¬ç»´åŸºå†ï¼ˆVikram Samvatï¼‰ç­‰
8.  **"islamic"**ï¼šä¼Šæ–¯å…°å†ï¼ˆIslamic Calendarï¼‰
9.  **"japanese"**ï¼šå’Œå†ï¼ˆJapanese Calendarï¼‰
10. **"persian"**ï¼šæ³¢æ–¯å†ï¼ˆPersian Calendarï¼‰
11. **"islamic-civil"**ï¼šä¼Šæ–¯å…°å†çš„å…¬æ°‘ç‰ˆæœ¬ï¼ˆIslamic Civil Calendarï¼‰ï¼Œé€šå¸¸ç”¨äºæ–‡ä¹¦ã€åˆåŒç­‰æ°‘äº‹äº‹åŠ¡

## æ˜ŸæœŸ

ä¸å¾—ä¸è¯´æ—¥æœ¬çš„å’Œå†, çœŸçš„æ˜¯å¾ˆç¥å¥‡. ä¸æ˜¯ä¸­æ–‡çš„å‘¨ä¸€åˆ°å‘¨æ—¥, ä¹Ÿä¸æ˜¯Sunday-Saturday. é¦–å…ˆæ—¥æœ¬è¿˜æœ‰çš‡å¸, æœ‰çš‡å¸å°±æœ‰å¹´å·. å¸¸è§ä¸‹é¢çš„ä¸€äº›å¹´ä»½

1.  **æ˜æ²»æ—¶ä»£ (Meiji Era)**:
    *   å¹´å·ï¼šæ˜æ²»ï¼ˆMeijiï¼‰
    *   å¹´ä»½èŒƒå›´ï¼š1868å¹´ - 1912å¹´
    *   æ³¨é‡Šï¼šæ˜æ²»æ—¶ä»£æ ‡å¿—ç€æ—¥æœ¬çš„è¿‘ä»£åŒ–å’Œå·¥ä¸šåŒ–çš„å¼€å§‹ã€‚
2.  **å¤§æ­£æ—¶ä»£ (Taisho Era)**:
    *   å¹´å·ï¼šå¤§æ­£ï¼ˆTaishoï¼‰
    *   å¹´ä»½èŒƒå›´ï¼š1912å¹´ - 1926å¹´
    *   æ³¨é‡Šï¼šå¤§æ­£æ—¶ä»£æ˜¯æ—¥æœ¬çš„ä¸€ä¸ªç›¸å¯¹çŸ­æš‚æ—¶æœŸï¼Œä¹Ÿæ ‡å¿—ç€æ—¥æœ¬çš„ä¸€äº›æ”¿æ²»å’Œç¤¾ä¼šå˜é©ã€‚
3.  **æ˜­å’Œæ—¶ä»£ (Showa Era)**:
    *   å¹´å·ï¼šæ˜­å’Œï¼ˆShowaï¼‰
    *   å¹´ä»½èŒƒå›´ï¼š1926å¹´ - 1989å¹´
    *   æ³¨é‡Šï¼šæ˜­å’Œæ—¶ä»£è§è¯äº†æ—¥æœ¬çš„æˆ˜äº‰å’Œæˆ˜åé‡å»ºï¼Œä»¥åŠæ—¥æœ¬æˆä¸ºç°ä»£å·¥ä¸šå¼ºå›½ã€‚
4.  **å¹³æˆæ—¶ä»£ (Heisei Era)**:
    *   å¹´å·ï¼šå¹³æˆï¼ˆHeiseiï¼‰
    *   å¹´ä»½èŒƒå›´ï¼š1989å¹´ - 2019å¹´
    *   æ³¨é‡Šï¼šå¹³æˆæ—¶ä»£åŒ…æ‹¬äº†æ—¥æœ¬çš„ç»æµç¹è£å’Œä¸€äº›ç¤¾ä¼šå˜é©ã€‚
5.  **ä»¤å’Œæ—¶ä»£ (Reiwa Era)**: [ä»¤å’Œç³»å¥¥ç‰¹æ›¼](https://baike.baidu.com/item/%E4%BB%A4%E5%92%8C%E7%B3%BB%E5%A5%A5%E7%89%B9%E6%9B%BC/50340521)
    *   å¹´å·ï¼šä»¤å’Œï¼ˆReiwaï¼‰
    *   å¹´ä»½èŒƒå›´ï¼š2019å¹´ - è‡³ä»Š
    *   æ³¨é‡Šï¼šä»¤å’Œæ—¶ä»£æ˜¯æ—¥æœ¬å½“å‰çš„å¹´å·ï¼Œå§‹äº2019å¹´5æœˆ1æ—¥ï¼Œæ ‡å¿—ç€æ–°çš„æ—¶ä»£çš„å¼€å§‹ã€‚

![](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/japan-calendar.png)

å¯ä»¥çœ‹åˆ°æ—¥æœ¬çš„æ—¥å†èµ·å§‹æ—¶å‘¨æ—¥ï¼ˆæ—¥ï¼‰ï¼Œä½†æ˜¯å‘¨ä¸€åˆ°å‘¨å…­åˆ†åˆ«å¯¹åº”æœˆç«æ°´æœ¨é‡‘åœŸã€‚ä¸ä¼—ä¸åŒã€‚


```jsx
// è·å–ä»Šå¤©è¿‡å»7å¤©çš„æ—¥æœŸ
// æ—¥æœŸå¯¹è±¡
const today = new Date();

// åˆ›å»ºä¸€ä¸ªé€‰é¡¹å¯¹è±¡ï¼ŒæŒ‡å®šè¾“å‡ºçš„è¯­è¨€å’Œé£æ ¼
const optionsCN = { weekday: 'long' };
const optionsJP = { weekday: 'long' };

// è·å–è¿‡å»ä¸€å‘¨çš„æ—¥æœŸ
console.log('\nè¿‡å»ä¸€å‘¨çš„æ—¥æœŸï¼š');
const CNArr = []
const JPArr = []
for (let i = 0; i < 7; i++) {
  const pastDate = new Date(today);
  pastDate.setDate(today.getDate() - i);
  CNArr.unshift(new Intl.DateTimeFormat('zh-CN', optionsCN).format(pastDate))
	JPArr.unshift(new Intl.DateTimeFormat('ja-JP', optionsJP).format(pastDate))
}
console.log('CNArr', CNArr.join(' ')) // CNArr æ˜ŸæœŸäºŒ æ˜ŸæœŸä¸‰ æ˜ŸæœŸå›› æ˜ŸæœŸäº” æ˜ŸæœŸå…­ æ˜ŸæœŸæ—¥ æ˜ŸæœŸä¸€
console.log('JPArr', JPArr.join(' ')) // JPArr ç«æ›œæ—¥ æ°´æ›œæ—¥ æœ¨æ›œæ—¥ é‡‘æ›œæ—¥ åœŸæ›œæ—¥ æ—¥æ›œæ—¥ æœˆæ›œæ—¥
```

## æ—¥å†å•ä½

```jsx
const dateTimeFields = new Intl.DisplayNames('en-US', { type: 'dateTimeField' });
console.log(dateTimeFields.of('era')); // è¾“å‡ºï¼šEra, çºªå…ƒçš„æ„æ€
console.log(dateTimeFields.of('year')); // è¾“å‡ºï¼šYear
console.log(dateTimeFields.of('month')); // è¾“å‡ºï¼šMonth
console.log(dateTimeFields.of('day')); // è¾“å‡ºï¼šDay
console.log(dateTimeFields.of('weekday')); // è¾“å‡ºï¼šDay of the week
console.log(dateTimeFields.of('hour')); // è¾“å‡ºï¼šHour
console.log(dateTimeFields.of('minute')); // è¾“å‡ºï¼šMinute
console.log(dateTimeFields.of('second')); // è¾“å‡ºï¼šSecond
console.log(dateTimeFields.of('quarter')); // è¾“å‡ºï¼šQuarter

const dateTimeFields = new Intl.DisplayNames('ja-JP', { type: 'dateTimeField' });
console.log(dateTimeFields.of('era')); // è¾“å‡ºï¼šæ™‚ä»£
console.log(dateTimeFields.of('year')); // è¾“å‡ºï¼šå¹´
console.log(dateTimeFields.of('month')); // è¾“å‡ºï¼šæœˆ
console.log(dateTimeFields.of('day')); // è¾“å‡ºï¼šæ—¥
console.log(dateTimeFields.of('weekday')); // è¾“å‡ºï¼šæ›œæ—¥
console.log(dateTimeFields.of('hour')); // è¾“å‡ºï¼šæ™‚
console.log(dateTimeFields.of('minute')); // è¾“å‡ºï¼šåˆ†
console.log(dateTimeFields.of('second')); // è¾“å‡ºï¼šç§’
console.log(dateTimeFields.of('quarter')); // è¾“å‡ºï¼šå››åŠæœŸ
```

## æ¯å‘¨ç¬¬ä¸€å¤©

en-USä¸€èˆ¬æ¯å‘¨ç¬¬ä¸€å¤©æ˜¯å‘¨æ—¥ï¼Œè€Œzh-CNä¸€èˆ¬æ¯å‘¨ç¬¬ä¸€å¤©æ˜¯å‘¨ä¸€ã€‚å¯ä»¥é€šè¿‡å¦‚ä¸‹ä¿¡æ¯åˆ¤æ–­ï¼š

- Intl. Localeå‡½æ•°è¿”å›å±æ€§é‡ŒfirstDayæ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶ä¸­ 0æˆ–7 è¡¨ç¤ºæ˜ŸæœŸæ—¥ï¼Œ1 è¡¨ç¤ºæ˜ŸæœŸä¸€ï¼Œä¾æ­¤ç±»æ¨ã€‚
- ä¸åŒçš„åœ°åŒºå’Œæ–‡åŒ–å¯èƒ½ä¼šå°†æ¯å‘¨çš„ç¬¬ä¸€å¤©è®¾ç½®ä¸ºä¸åŒçš„æ—¥æœŸï¼Œå› æ­¤è¿™ä¸ªå±æ€§å¯ä»¥å¸®åŠ©ä½ ç¡®å®šæ¯å‘¨çš„èµ·å§‹æ—¥æœŸï¼Œä¾‹å¦‚ï¼Œæ˜ŸæœŸå¤©æˆ–æ˜ŸæœŸä¸€ã€‚


```jsx
(new Intl.Locale('zh-CN')).weekInfo // {"firstDay":1,"weekend":[6,7],"minimalDays":1}
(new Intl.Locale('en-US')).weekInfo // {"firstDay":7,"weekend":[6,7],"minimalDays":1}

const locale = 'zh-CN'
console.log(new Intl.DateTimeFormat(locale, { weekday: "long" }).format(new Date(0, 0, new Intl.Locale(locale).weekInfo.firstDay))) // 'æ˜ŸæœŸä¸€'

const locale = 'en-US'
console.log(new Intl.DateTimeFormat(locale, { weekday: "long" }).format(new Date(0, 0, new Intl.Locale(locale).weekInfo.firstDay))) // 'Sunday'
```

èƒ½ç”Ÿæ•ˆçš„åŸå› æ˜¯ `new Date(0,0,7)` ç­‰ä»·äº `new Date(1900,0,7)` å¯¹åº”1900å¹´1æœˆ7æ—¥ï¼ˆUTC+0ï¼‰ï¼Œæ­¤æ—¶å¯¹åº”USçš„Sundayã€‚è€Œ `new Date(0,0,1)` å¯¹åº”1900å¹´1æœˆ1æ—¥ï¼ˆUTC+0ï¼‰ï¼Œå¯¹åº”CNçš„æ˜ŸæœŸä¸€ã€‚

## å¦‚ä½•å†™ä¸€ä¸ªå›½é™…åŒ–æ—¥å†ç»„ä»¶

1. zh-CNä¸‹æ˜¯æ˜ŸæœŸä¸€å¼€å¤´
2. en-USæ˜¯Sundayå¼€å¤´
3. æ—¥è¯­ç¯å¢ƒç¬¦åˆ ç«æ›œæ—¥ æ°´æ›œæ—¥ æœ¨æ›œæ—¥ é‡‘æ›œæ—¥ åœŸæ›œæ—¥ æ—¥æ›œæ—¥ æœˆæ›œæ—¥ç­‰æè¿°

[Intl-region-language-calendar](https://codesandbox.io/p/devbox/intl-region-language-calendar-xm7ls8?embed=1&file=%2Fsrc%2FApp.tsx)

#### å®ç°ç»†èŠ‚
1. å¦‚ä½•è·å–ä¸€å‘¨çš„ç¬¬ä¸€å¤©
```JS
const localeUS = 'en-US'
new Intl.DateTimeFormat(localeUS, { weekday: "long" }).format(new Date(0, 0, new Intl.Locale(localeUS).weekInfo.firstDay)) // 'Sunday'

const localeCN = 'zh-CN'
new Intl.DateTimeFormat(localeCN, { weekday: "long" }).format(new Date(0, 0, new Intl.Locale(localeCN).weekInfo.firstDay)) // 'æ˜ŸæœŸä¸€'
```
2. è¾“å‡ºä¸€å‘¨7å¤©
```JS
const locale = "en-US";
const firstDay = new Intl.Locale(locale).weekInfo.firstDay;
const formatInstace = new Intl.DateTimeFormat(locale, { weekday: "long" });
for (let i = 0; i < 7; i++) {
  console.log(formatInstace.format(new Date(0, 0, firstDay + i)));
}
// Sunday
// Monday
// Tuesday
// Wednesday
// Thursday
// Friday
// Saturday

const localeCN = "zh-CN";
const firstDayCN = new Intl.Locale(localeCN).weekInfo.firstDay;
const formatInstaceCN = new Intl.DateTimeFormat(localeCN, { weekday: "long" });
for (let i = 0; i < 7; i++) {
  console.log(formatInstaceCN.format(new Date(0, 0, firstDayCN + i)));
}
// æ˜ŸæœŸä¸€
// æ˜ŸæœŸäºŒ
// æ˜ŸæœŸä¸‰
// æ˜ŸæœŸå››
// æ˜ŸæœŸäº”
// æ˜ŸæœŸå…­
// æ˜ŸæœŸæ—¥
```


# åœ°åŒº
è¿™æ˜¯ä¸€ä¸ªæ—¥å¸¸å¼€å‘ä¸€å®šä¼šé‡åˆ°çš„è¯é¢˜ï¼Œå¯¹äºå›½å†…å¾ˆå¤šæƒ…å†µéƒ½å¯ä»¥ç”¨ä¸‰çº§è¡Œæ”¿åŒºåŸŸåˆ’åˆ†ã€‚çœ-å¸‚-åŒºæ¥æè¿°ä½ åœ¨å›½å†…çš„ä»»ä½•ä¸€ä¸ªåœ°æ–¹

å¯ä»¥çœ‹ [area-data](https://github.com/ManfredHu/area-data) è¿™ä¸ªä»“åº“çš„ä»£ç ï¼Œå°±æ˜¯çˆ¬å–çš„ç»Ÿè®¡å±€çš„æ•°æ®ã€‚ä½†æ˜¯16å¹´åˆ°25å¹´ï¼Œä¹ŸåºŸå¼ƒäº†ã€‚å¹¶æ²¡æœ‰å›ºå®šçš„æ–¹å¼å¯ä»¥è·å–åˆ°è¿™äº›æ•°æ®

å¯¹äºTiktokå…¨çƒåŒ–ä¸šåŠ¡æ¥è¯´ï¼Œå†…éƒ¨æœ‰åœ°ç†ä¸­å°è®°å½•ç€TTç»´åº¦çš„å…¨çƒåœ°åŒºæ•°æ®å¹¶ä¼šæœ‰å®šæœŸçš„æ›´æ–°ã€‚é‚£å†…éƒ¨æ˜¯æ€ä¹ˆæ ·ä¸€ä¸ªè¿è¥æµç¨‹å‘¢ï¼Ÿä¸¾ä¾‹Tiktokéœ€è¦å¯¹æŸäº›æ¬§æ´²å›½å®¶å¼€æ”¾ï¼Œä¾‹å¦‚ä¸‹é¢è¿™äº›æ¬§æ´²å›½å®¶éœ€è¦å¼€æ”¾äº†

```
const countryMapping = {
  AT: { en: "Austria", zh: "å¥¥åœ°åˆ©" },
  CZ: { en: "Czech Republic", zh: "æ·å…‹" },
  GR: { en: "Greece", zh: "å¸Œè…Š" },
  HU: { en: "Hungary", zh: "åŒˆç‰™åˆ©" },
  IE: { en: "Ireland", zh: "çˆ±å°”å…°" },
  PT: { en: "Portugal", zh: "è‘¡è„ç‰™" },
  RO: { en: "Romania", zh: "ç½—é©¬å°¼äºš" },
  LU: { en: "Luxembourg", zh: "å¢æ£®å ¡" },
  SK: { en: "Slovakia", zh: "æ–¯æ´›ä¼å…‹" },
  BG: { en: "Bulgaria", zh: "ä¿åŠ åˆ©äºš" },
  CY: { en: "Cyprus", zh: "å¡æµ¦è·¯æ–¯" },
  EE: { en: "Estonia", zh: "çˆ±æ²™å°¼äºš" },
  HR: { en: "Croatia", zh: "å…‹ç½—åœ°äºš" },
  LT: { en: "Lithuania", zh: "ç«‹é™¶å®›" },
  LV: { en: "Latvia", zh: "æ‹‰è„±ç»´äºš" },
  SI: { en: "Slovenia", zh: "æ–¯æ´›æ–‡å°¼äºš" },
};
```

1. åŸºå»ºå±‚é¢ï¼šé¦–å…ˆéœ€è¦å¯¹è¿™äº›å›½å®¶çš„è¿›è¡ŒåŸºç¡€ä¿¡æ¯çš„å¤‡é½
   1. ä¾‹å¦‚æœ€æ–°çš„è¡Œæ”¿åŒºåŸŸæ›´æ–°
   2. è¿™äº›å›½å®¶æ˜¯å¦è¦†ç›–äº†å¯¹åº”çš„è¯­è¨€ï¼Œå¦‚æœæ²¡æœ‰åˆ™æœ¬åœ°åŒ–å›¢é˜Ÿè¿˜è¦ç»§ç»­å®Œæˆå¯¹åº”è¯­è¨€çš„ç¿»è¯‘
   3. çŸ­ä¿¡ç”µè¯æœåŠ¡æ˜¯å¦å¯¹è¿™äº›å›½å®¶åšäº†å…¼å®¹
2. ä¸šåŠ¡å±‚é¢ï¼šæ˜¯å¦éœ€è¦å¯¹è¿™äº›å›½å®¶è¿›è¡Œå•ç‹¬é€‚é…ï¼Œä¾‹å¦‚æ–‡æ¡ˆè¶…å‡ºç­‰
3. è¿è¥å±‚é¢ï¼šé’ˆå¯¹ä¸Šé¢å·²ç»è§£å†³çš„é—®é¢˜ï¼Œè¿è¥éœ€è¦ç»™å‡ºå¯¹åº”åœ°åŒºçš„å¼€é‡è®¡åˆ’ã€‚ä¾‹å¦‚AåŠŸèƒ½åœ¨Aæ—¥æœŸå¯¹è¿™äº›å›½å®¶åœ°åŒºå¼€æ”¾ï¼Œå¤„ç†å®¢æˆ·å’¨è¯¢å’Œåé¦ˆã€‚BåŠŸèƒ½åœ¨Bæ—¥æœŸå¯¹é‚£äº›å›½å®¶å¼€æ”¾ï¼Œå¶å°”è¿˜æœ‰æ‹‰æ–°çš„ç«™å†…ä¿¡æˆ–è€…æ´»åŠ¨æ¨å¹¿

ä¸Šé¢3æ­¥å¯èƒ½ä¼šåå¤è¿›è¡Œï¼Œä¾‹å¦‚è¿è¥æ”¶é›†åˆ°feedbackåˆåé¦ˆç»™åŸºå»ºå’Œä¸šåŠ¡ã€‚åˆè¿­ä»£äº§å“ç­‰ï¼Œå¾ªç¯å¾€å¤æ˜¯ä¸€ä¸ªåŠ¨æ€çš„è¿‡ç¨‹

## åœ°åŒºçš„åˆ†çº§
å¯¹äºå…¨çƒåœ°åŒºï¼Œè¿™é‡Œçš„åšæ³•æ˜¯åŠ¨æ€çš„ã€‚ä¹Ÿå°±æ˜¯å¯èƒ½å‡ºç° äºŒçº§å’Œå››çº§çš„æƒ…å†µä¸å•æ˜¯ä¸‰çº§è¡Œæ”¿åŒºåŸŸï¼Œä¸¾ä¾‹å¦‚ä¸‹

1. æ–°åŠ å¡ï¼Œå…¶å®æ˜¯äºŒçº§çš„è¡Œæ”¿åŒºåŸŸç»“æ„ã€‚Singapore(æ–°åŠ å¡) -> South East(ä¸œå—åŒº)
2. ä¿„ç½—æ–¯ï¼Œå¯ä»¥æ˜¯å››çº§çš„è¡Œæ”¿åŒºåŸŸç»“æ„ã€‚Russia(ä¿„ç½—æ–¯è”é‚¦) -> Moscow Oblast(è«æ–¯ç§‘å·) -> Odintsovsky Urban Okrug(å¥¥é‡‘ä½æ²ƒå¸‚åŒº) -> Barvikha Settlement(å·´å°”ç»´å“ˆé•‡)

# Intlæ”¯æŒ

## æ”¯æŒæŸ¥è¯¢

å¯ä»¥é€šè¿‡API, `Intl.supportedValuesOf` è·å–åˆ°æ‰€æœ‰æ”¯æŒçš„

```jsx
const calendars = Intl.supportedValuesOf("calendar");
console.log(calendars); // è¾“å‡ºæ‰€æœ‰æ”¯æŒçš„æ—¥å†ç³»ç»Ÿ
// (18)Â ['buddhist', 'chinese', 'coptic', 'dangi', 'ethioaa', 'ethiopic', 'gregory', 'hebrew', 'indian', 'islamic', 'islamic-civil', 'islamic-rgsa', 'islamic-tbla', 'islamic-umalqura', 'iso8601', 'japanese', 'persian', 'roc']

const currencies = Intl.supportedValuesOf("currency");
console.log(currencies); // è¾“å‡ºæ‰€æœ‰æ”¯æŒçš„è´§å¸ä»£ç 
// (159)Â ['AED', 'AFN', 'ALL', 'AMD', 'ANG', 'AOA', 'ARS', 'AUD', 'AWG', 'AZN', 'BAM', 'BBD', 'BDT', 'BGN', 'BHD', 'BIF', 'BMD', 'BND', 'BOB', 'BRL', 'BSD', 'BTN', 'BWP', 'BYN', 'BZD', 'CAD', 'CDF', 'CHF', 'CLP', 'CNY', 'COP', 'CRC', 'CUC', 'CUP', 'CVE', 'CZK', 'DJF', 'DKK', 'DOP', 'DZD', 'EGP', 'ERN', 'ETB', 'EUR', 'FJD', 'FKP', 'GBP', 'GEL', 'GHS', 'GIP', 'GMD', 'GNF', 'GTQ', 'GYD', 'HKD', 'HNL', 'HRK', 'HTG', 'HUF', 'IDR', 'ILS', 'INR', 'IQD', 'IRR', 'ISK', 'JMD', 'JOD', 'JPY', 'KES', 'KGS', 'KHR', 'KMF', 'KPW', 'KRW', 'KWD', 'KYD', 'KZT', 'LAK', 'LBP', 'LKR', 'LRD', 'LSL', 'LYD', 'MAD', 'MDL', 'MGA', 'MKD', 'MMK', 'MNT', 'MOP', 'MRU', 'MUR', 'MVR', 'MWK', 'MXN', 'MYR', 'MZN', 'NAD', 'NGN', 'NIO',Â â€¦]

const timeZones = Intl.supportedValuesOf("timeZone");
console.log(timeZones); // è¾“å‡ºæ‰€æœ‰æ”¯æŒçš„æ—¶åŒº
// (428)Â ['Africa/Abidjan', 'Africa/Accra', 'Africa/Addis_Ababa', 'Africa/Algiers', 'Africa/Asmera', 'Africa/Bamako', 'Africa/Bangui', 'Africa/Banjul', 'Africa/Bissau', 'Africa/Blantyre', 'Africa/Brazzaville', 'Africa/Bujumbura', 'Africa/Cairo', 'Africa/Casablanca', 'Africa/Ceuta', 'Africa/Conakry', 'Africa/Dakar', 'Africa/Dar_es_Salaam', 'Africa/Djibouti', 'Africa/Douala', 'Africa/El_Aaiun', 'Africa/Freetown', 'Africa/Gaborone', 'Africa/Harare', 'Africa/Johannesburg', 'Africa/Juba', 'Africa/Kampala', 'Africa/Khartoum', 'Africa/Kigali', 'Africa/Kinshasa', 'Africa/Lagos', 'Africa/Libreville', 'Africa/Lome', 'Africa/Luanda', 'Africa/Lubumbashi', 'Africa/Lusaka', 'Africa/Malabo', 'Africa/Maputo', 'Africa/Maseru', 'Africa/Mbabane', 'Africa/Mogadishu', 'Africa/Monrovia', 'Africa/Nairobi', 'Africa/Ndjamena', 'Africa/Niamey', 'Africa/Nouakchott', 'Africa/Ouagadougou', 'Africa/Porto-Novo', 'Africa/Sao_Tome', 'Africa/Tripoli', 'Africa/Tunis', 'Africa/Windhoek', 'America/Adak', 'America/Anchorage', 'America/Anguilla', 'America/Antigua', 'America/Araguaina', 'America/Argentina/La_Rioja', 'America/Argentina/Rio_Gallegos', 'America/Argentina/Salta', 'America/Argentina/San_Juan', 'America/Argentina/San_Luis', 'America/Argentina/Tucuman', 'America/Argentina/Ushuaia', 'America/Aruba', 'America/Asuncion', 'America/Bahia', 'America/Bahia_Banderas', 'America/Barbados', 'America/Belem', 'America/Belize', 'America/Blanc-Sablon', 'America/Boa_Vista', 'America/Bogota', 'America/Boise', 'America/Buenos_Aires', 'America/Cambridge_Bay', 'America/Campo_Grande', 'America/Cancun', 'America/Caracas', 'America/Catamarca', 'America/Cayenne', 'America/Cayman', 'America/Chicago', 'America/Chihuahua', 'America/Ciudad_Juarez', 'America/Coral_Harbour', 'America/Cordoba', 'America/Costa_Rica', 'America/Creston', 'America/Cuiaba', 'America/Curacao', 'America/Danmarkshavn', 'America/Dawson', 'America/Dawson_Creek', 'America/Denver', 'America/Detroit', 'America/Dominica', 'America/Edmonton', 'America/Eirunepe',Â â€¦]
```

## ä½ç‰ˆæœ¬å…¼å®¹

Intlæ˜¯æµè§ˆå™¨å¯¹i18næä¾›çš„åº•å±‚APIï¼Œç”¨äºå¤„ç†å›½é™…åŒ–ç›¸å…³å†…å®¹ã€‚
é™„å¸¦BrowserStackäº‘çœŸæœºæµ‹è¯•å·¥å…·ï¼ˆCan I Useæ¨èï¼‰ï¼š<https://live.browserstack.com/dashboard>
å¦‚æœæ²¡å¤„ç†å¥½å…¼å®¹æ€§é—®é¢˜ç›´æ¥ä½¿ç”¨APIï¼Œä¼šæŠ¥JS Errorã€‚å†…å®¹ä¸º `Intl.DisplayNames is not a constructor`ã€‚

å¯¹åº”çš„ï¼Œä¸€äº›æ“ä½œç³»ç»Ÿä½ç‰ˆæœ¬çš„ç”¨æˆ·ï¼ˆé•¿æœŸä¸å‡çº§ç³»ç»Ÿï¼‰ä¼šé‡åˆ°JS Errorå¯¼è‡´ç™½å±ã€‚

![Google Pixel 4ï¼ˆ2019å¹´10æœˆ15æ—¥å‘è¡Œï¼‰](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7dc48299b3ec4e8cbf0d18f6bef40d39~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=634&h=1021&s=492194&e=png&b=7fbbf7)

### FormatJS

å¯ä»¥ç”¨FormatJSæä¾›çš„polyfillåšä½ç‰ˆæœ¬å…¼å®¹ï¼š<https://formatjs.io/docs/getting-started/installation>

1. æ”¯æŒå…³ç³»æœ‰å…ˆåä¾èµ–ï¼Œéœ€è¦æŒ‰ç…§ä¾èµ–é¡ºåºä¾æ¬¡å€’å…¥å¯¹åº”çš„åŒ…ã€‚
   ![ä¾èµ–å…³ç³»](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8dd149226bb64a668c91c9816073164b~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=952&h=744&s=60935&e=png&b=ffffff)

2. ç§»åŠ¨ç«¯åœºæ™¯å¦‚å°ç¨‹åºï¼Œå¦‚æœå…¨é‡å¯¼å…¥ç§»åŠ¨ç«¯åœºæ™¯ä¼šè®©åŒ…ä½“ç§¯çˆ†ç‚¸ï¼ˆæ™®é€šå‹ç¼©åŒ…Gzipå2.6Mï¼Œå…¨é‡å¯¼å…¥åä¼šåˆ°9.1Mï¼‰ã€‚æœ€åpolyfillæŒ‰ç…§é¡ºåºä¾æ¬¡å¯¼å…¥ï¼Œä¸”ç§»åŠ¨ç«¯åœºæ™¯åªå…œåº•è‹±æ–‡éƒ¨åˆ†ï¼Œé™åˆ¶åŒ…ä½“ç§¯åœ¨3Må†…ã€‚

```JS
async function loadPolyfill() {
    // å¦‚æœå½“å‰ç¯å¢ƒä¸æ”¯æŒ Intl æˆ–è€… Intl.DisplayNames
    if (!window.Intl || !window.Intl.DisplayNames) {
        window.Intl = window.Intl || {}
        // åŠ è½½ polyfill
        await import('@formatjs/intl-getcanonicallocales/polyfill-force')
        await import('@formatjs/intl-locale/polyfill-force')
        await import('@formatjs/intl-displaynames/polyfill-force')
        await import('@formatjs/intl-displaynames/locale-data/en')
        return false
    } else {
        // å½“å‰ç¯å¢ƒæ”¯æŒ Intl.DisplayNames APIï¼Œä¸éœ€è¦ Polyfill
        return true
    }
}
```

### Why not Babel?
ä¼—æ‰€å‘¨çŸ¥ï¼ŒBabelæœ‰ä¸€ä¸ª[babel-preset-env](https://www.babeljs.cn/docs/babel-preset-env#how-does-it-work)ï¼Œç”¨äºåœ¨ç¼–è¯‘ä»£ç æ—¶æ™ºèƒ½ï¼ˆåŸºäº[core-js-compat](https://www.npmjs.com/package/core-js-compat)ï¼‰å¼•å…¥helperå’Œpolyfillã€‚

æ™ºèƒ½çš„å«ä¹‰æ˜¯å¯ä»¥è®¾ç½®[æœ€ä½å…¼å®¹çš„æµè§ˆå™¨](https://github.com/browserslist/browserslist#queries)å’Œä»£ç ï¼ŒåŠ¨æ€å¼•ç”¨æ‰€éœ€çš„helperå’Œpolyfillã€‚


```JS
// babel.config.js
module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        useBuiltIns: 'usage', // æ ¹æ®æ¯ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œç”¨åˆ°äº†å“ªäº›esçš„æ–°ç‰¹æ€§å’Œtargetså¯¼å…¥polyfillï¼Œæ›´åŠ ç²¾ç®€
        corejs: 3, // æŒ‡å®š core-js ç‰ˆæœ¬
        targets: "> 0.25%, not dead" // æŒ‡å®šç›®æ ‡æµè§ˆå™¨, é€‰å–å…¨çƒä½¿ç”¨ç‡è¶…è¿‡ 0.25% çš„æµè§ˆå™¨ç‰ˆæœ¬
      },
    ],
  ],
};
```

**Babelåº•å±‚ä½¿ç”¨[core-js](https://github.com/zloirock/core-js)è¿›è¡Œpolyfillï¼Œ[ä½†æ˜¯core-jsä¸åŒ…å«Intl APIéƒ¨åˆ†çš„polyfill](https://github.com/zloirock/core-js?tab=readme-ov-file#missing-polyfills)ï¼Œæ‰€ä»¥Babelå¹¶ä¸èƒ½ä¸ºIntl APIåšpolyfillã€‚**


![](https://raw.githubusercontent.com/ManfredHu/manfredHu.github.io/master/images/i18n-intl/core-js-not-i18n.png)

## Nodejsä½¿ç”¨
1. å®‰è£…
```bash
npm i @formatjs/intl
```
2. ä½¿ç”¨
```JS
import {createIntl, createIntlCache} from '@formatjs/intl'

// This is optional but highly recommended
// since it prevents memory leak
const cache = createIntlCache()

const intlFr = createIntl(
  {
    locale: 'fr-FR',
    messages: {},
  },
  cache
)
const intlEn = createIntl(
  {
    locale: 'en-US',
    message: {},
    cache
  }
)

// Call imperatively
console.log(intlFr.formatNumber(2000000000000)) // 2â€¯000â€¯000â€¯000â€¯000
console.log(intlEn.formatNumber(2000000000000)) // 2,000,000,000,000
```